<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - EventSys</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Global & Admin Specific Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="admin-mode">

    <div class="admin-layout">

        <!-- Collapsible Sidebar -->
        <aside class="admin-sidebar" id="adminSidebar">
            <div class="sidebar-header">
                <div
                    style="width: 32px; height: 32px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white;">
                    <i class="fa-solid fa-graduation-cap"></i>
                </div>
                <span class="text-gradient" style="font-weight: 700; font-size: 1.2rem;">EventSys</span>
                <button class="sidebar-toggle" id="sidebarToggle" style="margin-left: auto;">
                    <i class="fa-solid fa-bars-staggered"></i>
                </button>
            </div>

            <nav class="sidebar-menu">
                <a href="#" class="sidebar-item active" data-target="dashboardModule">
                    <i class="fa-solid fa-chart-pie"></i> <span>Dashboard</span>
                </a>
                <a href="#" class="sidebar-item" data-target="studentsModule">
                    <i class="fa-solid fa-user-graduate"></i> <span>Students</span>
                </a>
                <a href="#" class="sidebar-item" data-target="eventsModule">
                    <i class="fa-solid fa-calendar-days"></i> <span>Events Setup</span>
                </a>
                <a href="#" class="sidebar-item" data-target="registrationsModule">
                    <i class="fa-solid fa-clipboard-user"></i> <span>Registrations</span>
                </a>
                <a href="#" class="sidebar-item" data-target="certificatesModule">
                    <i class="fa-solid fa-file-certificate"></i> <span>Certificates</span>
                </a>
                <div style="margin: 1rem 0; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary); font-weight: 600; padding: 0 1rem;"
                    class="sidebar-label">System</div>
                <a href="#" class="sidebar-item" data-target="logsModule">
                    <i class="fa-solid fa-timeline"></i> <span>Activity Logs</span>
                </a>
                <a href="#" class="sidebar-item" data-target="rolesModule">
                    <i class="fa-solid fa-shield-halved"></i> <span>Roles & Access</span>
                </a>
                <a href="#" class="sidebar-item" data-target="settingsModule">
                    <i class="fa-solid fa-gear"></i> <span>Settings</span>
                </a>
            </nav>

            <div style="padding: 1.5rem 1rem; border-top: 1px solid var(--card-border);">
                <a href="login.html" class="sidebar-item" style="color: var(--color-danger);">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i> <span>Logout Session</span>
                </a>
            </div>
        </aside>

        <!-- Main Content Wrap -->
        <div class="admin-main-wrap">

            <!-- Top Navbar -->
            <header class="admin-topbar">
                <div class="topbar-search">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" placeholder="Search events, students, or IDs...">
                </div>

                <div class="topbar-actions">
                    <button class="btn btn-primary" onclick="window.openDrawer('Create New Event')"
                        style="padding: 0.5rem 1.2rem; border-radius: var(--radius-pill);">
                        <i class="fa-solid fa-plus"></i> New Event
                    </button>

                    <button class="topbar-icon" id="adminThemeToggle" title="Toggle Theme">
                        <i class="fa-solid fa-moon"></i>
                    </button>

                    <button class="topbar-icon" title="Notifications">
                        <i class="fa-regular fa-bell"></i>
                        <span class="notification-dot"></span>
                    </button>

                    <div class="admin-profile"
                        onclick="document.querySelector('.sidebar-item[data-target=\'settingsModule\']').click();">
                        <img src="https://ui-avatars.com/api/?name=Admin+Root&background=6366f1&color=fff" alt="Admin">
                        <div style="display: flex; flex-direction: column;">
                            <span style="font-weight: 600; font-size: 0.9rem; color: var(--text-primary);">Root
                                Admin</span>
                            <span style="font-size: 0.75rem; color: var(--text-secondary);">Superuser</span>
                        </div>
                        <i class="fa-solid fa-chevron-down"
                            style="color: var(--text-secondary); font-size: 0.8rem; margin-left: 0.5rem;"></i>
                    </div>
                </div>
            </header>

            <!-- Dynamic Screens -->
            <main class="admin-content" id="mainContent">

                <!-- ================= MODULE: DASHBOARD OVERVIEW ================= -->
                <section id="dashboardModule" class="module-section active">
                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 2rem;">
                        <div>
                            <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Dashboard Overview</h1>
                            <p class="text-secondary">Welcome back. Here is what is happening across the college today.
                            </p>
                        </div>
                        <button class="btn btn-outline" style="border-radius: var(--radius-pill);"
                            onclick="window.exportDashboardReport()"><i class="fa-solid fa-download"></i> Export
                            Report</button>
                    </div>

                    <!-- Animated Stat Cards -->
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);"><i
                                    class="fa-solid fa-users"></i></div>
                            <div class="stat-info">
                                <h3>Total Students</h3>
                                <div class="stat-val load-simulate skeleton" style="width:80px; height: 32px;"
                                    data-value="2,450"></div>
                                <div class="stat-growth up"><i class="fa-solid fa-arrow-trend-up"></i> +12% this month
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6, #6d28d9);"><i
                                    class="fa-solid fa-calendar-check"></i></div>
                            <div class="stat-info">
                                <h3>Active Events</h3>
                                <div class="stat-val load-simulate skeleton" style="width:50px; height: 32px;"
                                    data-value="14"></div>
                                <div class="stat-growth up"><i class="fa-solid fa-arrow-trend-up"></i> +3 ongoing</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #10b981, #047857);"><i
                                    class="fa-solid fa-clipboard-check"></i></div>
                            <div class="stat-info">
                                <h3>Registrations</h3>
                                <div class="stat-val load-simulate skeleton" style="width:80px; height: 32px;"
                                    data-value="8,920"></div>
                                <div class="stat-growth up"><i class="fa-solid fa-arrow-trend-up"></i> +450 today</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #b45309);"><i
                                    class="fa-solid fa-award"></i></div>
                            <div class="stat-info">
                                <h3>Certs Issued</h3>
                                <div class="stat-val load-simulate skeleton" style="width:80px; height: 32px;"
                                    data-value="6,150"></div>
                                <div class="stat-growth up"><i class="fa-solid fa-arrow-trend-up"></i> +24% automation
                                    rate</div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Grid -->
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                        <div class="chart-card">
                            <h3 style="margin-bottom: 1.5rem; font-size: 1.1rem;">Registration Trends (6 Months)</h3>
                            <div style="height: 300px;"><canvas id="regChart"></canvas></div>
                        </div>
                        <div class="chart-card">
                            <h3 style="margin-bottom: 1.5rem; font-size: 1.1rem;">Global Attendance Rate</h3>
                            <div style="height: 300px;"><canvas id="attendanceChart"></canvas></div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr; gap: 1.5rem;">
                        <div class="chart-card">
                            <h3 style="margin-bottom: 1.5rem; font-size: 1.1rem;">Participation by Department</h3>
                            <div style="height: 300px;"><canvas id="deptChart"></canvas></div>
                        </div>
                    </div>
                </section>

                <!-- ================= MODULE: STUDENTS (ENHANCED DIRECTORATE) ================= -->
                <section id="studentsModule" class="module-section">

                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                        <div>
                            <h1 style="font-size: 2.2rem; margin-bottom: 0.5rem; font-weight: 700;">Student Directorate
                            </h1>
                            <p class="text-secondary" style="font-size: 1.05rem;">Manage profiles, monitor XP progress,
                                and control academic event eligibility.</p>
                        </div>

                        <!-- Export Tools (Top Right) -->
                        <div style="display: flex; gap: 0.8rem;">
                            <button class="btn btn-outline"
                                style="border-radius: var(--radius-pill); background: var(--admin-surface);"
                                onclick="window.exportStudentsCSV()"><i class="fa-solid fa-file-csv text-success"></i>
                                CSV</button>
                            <button class="btn btn-outline"
                                style="border-radius: var(--radius-pill); background: var(--admin-surface);"
                                onclick="window.exportStudentsExcel()"><i
                                    class="fa-solid fa-file-excel text-success"></i> Excel</button>
                            <button class="btn btn-outline"
                                style="border-radius: var(--radius-pill); background: var(--admin-surface);"
                                onclick="window.printStudentsData()"><i class="fa-solid fa-print"></i> Print</button>
                            <button class="btn btn-primary" style="border-radius: var(--radius-pill);"
                                onclick="window.exportStudentsReport()"><i class="fa-solid fa-chart-line"></i>
                                Report</button>
                        </div>
                    </div>

                    <!-- Top Analytics Strip (5 Animated Cards) -->
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.2rem; margin-bottom: 2.5rem;">

                        <div class="stat-card" style="padding: 1.2rem; gap: 1rem;">
                            <div class="stat-icon"
                                style="width: 48px; height: 48px; font-size: 1.2rem; background: linear-gradient(135deg, rgba(59,130,246,0.1), rgba(29,78,216,0.2)); color: #3b82f6;">
                                <i class="fa-solid fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3 style="font-size: 0.85rem; text-transform: uppercase;">Total Students</h3>
                                <div class="stat-val load-simulate skeleton"
                                    style="font-size: 1.6rem; width:60px; height: 26px;" data-value="2,450"></div>
                                <div class="stat-growth up" style="font-size: 0.75rem;"><i
                                        class="fa-solid fa-arrow-up"></i> 120 new</div>
                            </div>
                        </div>

                        <div class="stat-card" style="padding: 1.2rem; gap: 1rem;">
                            <div class="stat-icon"
                                style="width: 48px; height: 48px; font-size: 1.2rem; background: linear-gradient(135deg, rgba(16,185,129,0.1), rgba(4,120,87,0.2)); color: #10b981;">
                                <i class="fa-solid fa-user-check"></i>
                            </div>
                            <div class="stat-info">
                                <h3 style="font-size: 0.85rem; text-transform: uppercase;">Active Students</h3>
                                <div class="stat-val load-simulate skeleton"
                                    style="font-size: 1.6rem; width:60px; height: 26px;" data-value="1,842"></div>
                                <div class="stat-growth up" style="font-size: 0.75rem;"><i
                                        class="fa-solid fa-arrow-up"></i> 8% increase</div>
                            </div>
                        </div>

                        <div class="stat-card" style="padding: 1.2rem; gap: 1rem;">
                            <div class="stat-icon"
                                style="width: 48px; height: 48px; font-size: 1.2rem; background: linear-gradient(135deg, rgba(239,68,68,0.1), rgba(185,28,28,0.2)); color: #ef4444;">
                                <i class="fa-solid fa-user-xmark"></i>
                            </div>
                            <div class="stat-info">
                                <h3 style="font-size: 0.85rem; text-transform: uppercase;">Inactive Students</h3>
                                <div class="stat-val load-simulate skeleton"
                                    style="font-size: 1.6rem; width:60px; height: 26px;" data-value="142"></div>
                                <div class="stat-growth down" style="font-size: 0.75rem;"><i
                                        class="fa-solid fa-arrow-down"></i> Needs attention</div>
                            </div>
                        </div>

                        <div class="stat-card" style="padding: 1.2rem; gap: 1rem;">
                            <div class="stat-icon"
                                style="width: 48px; height: 48px; font-size: 1.2rem; background: linear-gradient(135deg, rgba(168,85,247,0.1), rgba(109,40,217,0.2)); color: #a855f7;">
                                <i class="fa-solid fa-bolt"></i>
                            </div>
                            <div class="stat-info">
                                <h3 style="font-size: 0.85rem; text-transform: uppercase;">Avg XP Level</h3>
                                <div class="stat-val load-simulate skeleton"
                                    style="font-size: 1.6rem; width:60px; height: 26px;" data-value="Lvl 4"></div>
                                <div class="stat-growth up" style="font-size: 0.75rem;"><i
                                        class="fa-solid fa-arrow-up"></i> +450 Avg XP</div>
                            </div>
                        </div>

                        <div class="stat-card" style="padding: 1.2rem; gap: 1rem;">
                            <div class="stat-icon"
                                style="width: 48px; height: 48px; font-size: 1.2rem; background: linear-gradient(135deg, rgba(245,158,11,0.1), rgba(180,83,9,0.2)); color: #f59e0b;">
                                <i class="fa-solid fa-file-certificate"></i>
                            </div>
                            <div class="stat-info">
                                <h3 style="font-size: 0.85rem; text-transform: uppercase;">Cert Eligible</h3>
                                <div class="stat-val load-simulate skeleton"
                                    style="font-size: 1.6rem; width:60px; height: 26px;" data-value="850"></div>
                                <div class="stat-growth up" style="font-size: 0.75rem;"><i
                                        class="fa-solid fa-arrow-up"></i> 12 pending</div>
                            </div>
                        </div>

                    </div>

                    <!-- Main Layout Split (Data Grid + Insights Sidebar) -->
                    <div style="display: grid; grid-template-columns: 1fr 300px; gap: 2rem;">

                        <!-- Smart Data Grid Area -->
                        <div style="display: flex; flex-direction: column; gap: 1.5rem;">

                            <!-- Filter Chips & Searchbar -->
                            <div class="grid-toolbar"
                                style="border-radius: var(--radius-lg); padding: 1rem 1.5rem; background: var(--admin-surface);">

                                <div style="position: relative; width: 350px;">
                                    <i class="fa-solid fa-magnifying-glass"
                                        style="position: absolute; left: 1.2rem; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                                    <input type="text" id="studentSearchInput"
                                        placeholder="Search names, reg no, or dept..."
                                        style="width: 100%; padding: 0.7rem 1rem 0.7rem 3rem; border-radius: var(--radius-pill); border: 1px solid var(--card-border); background: var(--bg-color); color: var(--text-primary);">
                                </div>

                                <div class="filter-chips" id="studentFilterChips"
                                    style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                    <button class="chip active">All Students</button>
                                    <button class="chip">Active</button>
                                    <button class="chip">High XP</button>
                                    <button class="chip">CSE Dept</button>
                                    <button class="chip"
                                        style="color: var(--color-danger); background: transparent; border-color: transparent;"><i
                                            class="fa-solid fa-xmark"></i> Clear</button>
                                </div>

                            </div>

                            <!-- Modern Student Table with Integrated Gamification -->
                            <div class="data-grid-wrap shadow-soft"
                                style="border: none; box-shadow: 0 10px 30px -10px rgba(0,0,0,0.05);">

                                <!-- Bulk Actions Bar (Hidden by default, shown when checkboxes clicked) -->
                                <div id="bulkActionsBar"
                                    style="padding: 1rem 1.5rem; background: rgba(99,102,241,0.05); border-bottom: 1px solid var(--card-border); display: flex; justify-content: space-between; align-items: center; display: none;">
                                    <span style="font-weight: 600; color: var(--primary-color);">2 Students
                                        Selected</span>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <button class="btn btn-outline btn-sm"><i class="fa-solid fa-user-check"></i>
                                            Activate</button>
                                        <button class="btn btn-outline btn-sm"><i class="fa-solid fa-user-xmark"></i>
                                            Suspend</button>
                                        <button class="btn btn-primary btn-sm btn-danger"><i
                                                class="fa-solid fa-trash"></i> Delete</button>
                                    </div>
                                </div>

                                <div style="overflow-x: auto;">
                                    <table class="admin-table smart-table">
                                        <thead>
                                            <tr>
                                                <th style="width: 40px; padding-left: 1.5rem;"><input type="checkbox"
                                                        id="selectAllStudents"></th>
                                                <th class="sortable" data-sort="name" style="cursor: pointer;">Student
                                                    Details <i class="fa-solid fa-sort"
                                                        style="color: #cbd5e1; margin-left: 0.5rem;"></i></th>
                                                <th class="sortable" data-sort="xp" style="cursor: pointer;">
                                                    Gamification & XP <i class="fa-solid fa-sort"
                                                        style="color: #cbd5e1; margin-left: 0.5rem;"></i></th>
                                                <th class="sortable" data-sort="status" style="cursor: pointer;">Status
                                                    <i class="fa-solid fa-sort"
                                                        style="color: #cbd5e1; margin-left: 0.5rem;"></i>
                                                </th>
                                                <th style="text-align: right; padding-right: 1.5rem;">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="studentGridBody">

                                            <!-- Row 1 -->
                                            <tr onclick="window.openStudentProfile('Alex Carter')"
                                                style="cursor: pointer;">
                                                <td onclick="event.stopPropagation()"><input type="checkbox"></td>
                                                <td>
                                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                                        <img src="https://ui-avatars.com/api/?name=Alex+Carter&background=6366f1&color=fff"
                                                            style="width: 40px; height: 40px; border-radius: 50%;">
                                                        <div>
                                                            <div
                                                                style="font-weight: 600; font-size: 1rem; color: var(--text-primary);">
                                                                Alex Carter</div>
                                                            <div
                                                                style="font-size: 0.8rem; color: var(--text-secondary);">
                                                                2026CSE101 • Comp. Science</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div style="width: 180px;">
                                                        <div
                                                            style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.3rem;">
                                                            <span
                                                                style="font-weight: 600; color: var(--primary-color);">Level
                                                                12 <span class="badge badge-tech"
                                                                    style="padding: 0.1rem 0.4rem; font-size: 0.65rem; margin-left: 0.3rem;">Gold</span></span>
                                                            <span style="color: var(--text-secondary);">1,450 XP</span>
                                                        </div>
                                                        <div class="progress-bar-container"
                                                            style="height: 6px; background: rgba(99,102,241,0.1);">
                                                            <div class="progress-bar-fill"
                                                                style="width: 72%; background: var(--primary-color);">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td onclick="event.stopPropagation()">
                                                    <!-- Clickable inline toggle -->
                                                    <div class="status-toggle" onclick="toggleStatus(this)"
                                                        data-status="active">
                                                        <span class="status-badge success"><i
                                                                class="fa-solid fa-circle-dot"
                                                                style="font-size: 0.6rem; margin-right: 0.3rem;"></i>
                                                            Active</span>
                                                    </div>
                                                </td>
                                                <td style="text-align: right; padding-right: 1.5rem;"
                                                    onclick="event.stopPropagation()">
                                                    <button class="action-btn edit" title="Edit Student"><i
                                                            class="fa-solid fa-pen"></i></button>
                                                </td>
                                            </tr>

                                            <!-- Row 2 -->
                                            <tr onclick="window.openStudentProfile('Sarah Jen')"
                                                style="cursor: pointer;">
                                                <td onclick="event.stopPropagation()"><input type="checkbox"></td>
                                                <td>
                                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                                        <img src="https://ui-avatars.com/api/?name=Sarah+Jen&background=ec4899&color=fff"
                                                            style="width: 40px; height: 40px; border-radius: 50%;">
                                                        <div>
                                                            <div
                                                                style="font-weight: 600; font-size: 1rem; color: var(--text-primary);">
                                                                Sarah Jen</div>
                                                            <div
                                                                style="font-size: 0.8rem; color: var(--text-secondary);">
                                                                2026ROB205 • Robotics</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div style="width: 180px;">
                                                        <div
                                                            style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.3rem;">
                                                            <span
                                                                style="font-weight: 600; color: var(--text-primary);">Level
                                                                8 <span class="badge badge-workshop"
                                                                    style="padding: 0.1rem 0.4rem; font-size: 0.65rem; margin-left: 0.3rem;">Silver</span></span>
                                                            <span style="color: var(--text-secondary);">850 XP</span>
                                                        </div>
                                                        <div class="progress-bar-container" style="height: 6px;">
                                                            <div class="progress-bar-fill"
                                                                style="width: 45%; background: var(--text-primary);">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td onclick="event.stopPropagation()">
                                                    <div class="status-toggle" onclick="toggleStatus(this)"
                                                        data-status="active">
                                                        <span class="status-badge success"><i
                                                                class="fa-solid fa-circle-dot"
                                                                style="font-size: 0.6rem; margin-right: 0.3rem;"></i>
                                                            Active</span>
                                                    </div>
                                                </td>
                                                <td style="text-align: right; padding-right: 1.5rem;"
                                                    onclick="event.stopPropagation()">
                                                    <button class="action-btn edit" title="Edit Student"><i
                                                            class="fa-solid fa-pen"></i></button>
                                                </td>
                                            </tr>

                                            <!-- Row 3 -->
                                            <tr onclick="window.openStudentProfile('Rahul Kumar')"
                                                style="cursor: pointer;">
                                                <td onclick="event.stopPropagation()"><input type="checkbox"></td>
                                                <td>
                                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                                        <img src="https://ui-avatars.com/api/?name=Rahul+Kumar&background=475569&color=fff"
                                                            style="width: 40px; height: 40px; border-radius: 50%;">
                                                        <div>
                                                            <div
                                                                style="font-weight: 600; font-size: 1rem; color: var(--text-primary);">
                                                                Rahul Kumar</div>
                                                            <div
                                                                style="font-size: 0.8rem; color: var(--text-secondary);">
                                                                2026MEC042 • Mechanical</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div style="width: 180px; opacity: 0.5;">
                                                        <div
                                                            style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.3rem;">
                                                            <span
                                                                style="font-weight: 600; color: var(--text-secondary);">Level
                                                                1 <span class="badge"
                                                                    style="background: rgba(0,0,0,0.05); padding: 0.1rem 0.4rem; font-size: 0.65rem; margin-left: 0.3rem;">Bronze</span></span>
                                                            <span style="color: var(--text-secondary);">10 XP</span>
                                                        </div>
                                                        <div class="progress-bar-container"
                                                            style="height: 6px; background: rgba(0,0,0,0.05);">
                                                            <div class="progress-bar-fill"
                                                                style="width: 5%; background: var(--text-secondary);">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td onclick="event.stopPropagation()">
                                                    <div class="status-toggle" onclick="toggleStatus(this)"
                                                        data-status="inactive">
                                                        <span class="status-badge warning"><i
                                                                class="fa-solid fa-circle-pause"
                                                                style="font-size: 0.6rem; margin-right: 0.3rem;"></i>
                                                            Inactive</span>
                                                    </div>
                                                </td>
                                                <td style="text-align: right; padding-right: 1.5rem;"
                                                    onclick="event.stopPropagation()">
                                                    <button class="action-btn edit" title="Edit Student"><i
                                                            class="fa-solid fa-pen"></i></button>
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>

                                <div
                                    style="padding: 1rem 1.5rem; background: rgba(0,0,0,0.01); display: flex; justify-content: space-between; align-items: center; color: var(--text-secondary); font-size: 0.9rem; border-top: 1px solid var(--card-border);">
                                    <span id="studentPagInfo">Showing 1 to 3 of 3 entries</span>
                                    <div style="display: flex; gap: 0.5rem;" id="studentPagination">
                                        <!-- Pagination dynamically injected -->
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Smart Insights Panel Sidebar -->
                        <div class="insights-panel" style="position: sticky; top: 0;">

                            <div class="glass"
                                style="border-radius: var(--radius-lg); padding: 1.5rem; border: 1px solid rgba(168,85,247,0.3); background: linear-gradient(180deg, rgba(168,85,247,0.05) 0%, var(--admin-surface) 100%);">

                                <h3
                                    style="font-size: 1.2rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem; color: var(--text-primary);">
                                    <i class="fa-solid fa-wand-magic-sparkles text-gradient"></i> System Insights
                                </h3>

                                <div style="display: flex; flex-direction: column; gap: 1rem;">

                                    <div
                                        style="padding: 1rem; border-radius: var(--radius-md); background: var(--color-success-light); border-left: 3px solid var(--color-success);">
                                        <div
                                            style="font-weight: 600; font-size: 0.9rem; color: var(--color-success); margin-bottom: 0.2rem;">
                                            Milestone Reached <i class="fa-solid fa-party-horn"></i></div>
                                        <p style="font-size: 0.85rem; color: var(--text-primary); margin: 0;">12
                                            students just became eligible for the <strong>Master Attendant
                                                Certificate</strong>.</p>
                                    </div>

                                    <div
                                        style="padding: 1rem; border-radius: var(--radius-md); background: rgba(0,0,0,0.02); border: 1px solid var(--card-border);">
                                        <div
                                            style="font-weight: 600; font-size: 0.9rem; color: var(--text-primary); margin-bottom: 0.2rem;">
                                            <i class="fa-solid fa-chart-simple text-primary"></i> Participation Drop
                                        </div>
                                        <p style="font-size: 0.85rem; color: var(--text-secondary); margin: 0;">Robotics
                                            Department has a 15% decrease in attendance this month.</p>
                                    </div>

                                    <div
                                        style="padding: 1rem; border-radius: var(--radius-md); background: var(--color-warning-light); border-left: 3px solid var(--color-warning);">
                                        <div
                                            style="font-weight: 600; font-size: 0.9rem; color: var(--color-warning); margin-bottom: 0.2rem;">
                                            <i class="fa-solid fa-clock"></i> Inactivity Alert
                                        </div>
                                        <p style="font-size: 0.85rem; color: var(--text-primary); margin: 0;">3 students
                                            have been marked inactive for over 30 days. Action recommended.</p>
                                    </div>

                                </div>

                                <div
                                    style="margin-top: 1.5rem; text-align: center; border-top: 1px solid var(--card-border); padding-top: 1rem;">
                                    <button class="btn btn-outline"
                                        style="width: 100%; border-radius: var(--radius-pill); font-size: 0.85rem;"><i
                                            class="fa-solid fa-arrows-rotate"></i> Refresh AI Insights</button>
                                </div>
                            </div>

                        </div>
                    </div>
                </section>

                <!-- ================= MODULE: REGISTRATIONS & ATTENDANCE ================= -->
                <section id="registrationsModule" class="module-section">
                    <div style="margin-bottom: 2rem;">
                        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Event Attendance Terminal</h1>
                        <p class="text-secondary">Mark attendance instantly to auto-issue certificates.</p>
                    </div>

                    <div class="data-grid-wrap">
                        <div class="grid-toolbar">
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <span style="font-weight: 600;">Active Event:</span>
                                <select
                                    style="padding: 0.6rem 1rem; border-radius: var(--radius-pill); border: 1px solid var(--card-border); background: var(--bg-color); color: var(--primary-color); font-weight: 600; outline: none;">
                                    <option>National Tech Symposium 2026</option>
                                    <option>AI & ML Deep Dive</option>
                                </select>
                            </div>
                            <button class="btn btn-primary"
                                onclick="window.showToast('300 Certificates Auto-Issued based on Attendance.', 'success')">
                                <i class="fa-solid fa-wand-magic-sparkles"></i> Auto-Issue Certs to Presentees
                            </button>
                        </div>

                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Student Name</th>
                                    <th>Reg No.</th>
                                    <th>Registration Date</th>
                                    <th>Attendance Status</th>
                                    <th style="text-align: right;">Toggle Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Alex Carter</td>
                                    <td>2026CSE101</td>
                                    <td>Oct 10, 2026</td>
                                    <td><span class="status-badge warning" id="attGrp1">Registered</span></td>
                                    <td style="text-align: right;">
                                        <button class="btn btn-outline"
                                            style="padding: 0.4rem 1rem; border-color: var(--color-success); color: var(--color-success);"
                                            onclick="document.getElementById('attGrp1').className='status-badge success'; document.getElementById('attGrp1').innerText='Present'; window.showToast('Marked Present')">Mark
                                            Present</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Sarah Jen</td>
                                    <td>2026ROB205</td>
                                    <td>Oct 11, 2026</td>
                                    <td><span class="status-badge success">Present</span></td>
                                    <td style="text-align: right;">
                                        <button class="btn btn-outline" style="padding: 0.4rem 1rem;"
                                            disabled>Logged</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Rahul Kumar</td>
                                    <td>2026MEC042</td>
                                    <td>Oct 11, 2026</td>
                                    <td><span class="status-badge danger">Absent</span></td>
                                    <td style="text-align: right;">
                                        <button class="btn btn-outline" style="padding: 0.4rem 1rem;"
                                            disabled>Logged</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- ================= MODULE: ACTIVITY LOGS ================= -->
                <section id="logsModule" class="module-section">
                    <div style="margin-bottom: 2rem;">
                        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">System Activity Timeline</h1>
                        <p class="text-secondary">Immutable transparent records of recent operations.</p>
                    </div>

                    <div class="glass" style="padding: 2.5rem; border-radius: var(--radius-lg);">
                        <div class="timeline">

                            <div class="timeline-item">
                                <div class="timeline-icon"><i class="fa-solid fa-file-certificate"></i></div>
                                <div class="timeline-content">
                                    <p style="margin: 0;"><strong>System</strong> auto-issued 15 certificates for <em>AI
                                            & ML Deep Dive</em>.</p>
                                    <span class="timeline-time">Just now</span>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-icon"
                                    style="color: var(--color-success); border-color: var(--color-success);"><i
                                        class="fa-solid fa-user-check"></i></div>
                                <div class="timeline-content">
                                    <p style="margin: 0;"><strong>Prof. Smith</strong> marked attendance for 145
                                        students in <em>National Tech Symposium</em>.</p>
                                    <span class="timeline-time">2 hours ago</span>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-icon"
                                    style="color: var(--color-danger); border-color: var(--color-danger);"><i
                                        class="fa-solid fa-trash-can"></i></div>
                                <div class="timeline-content">
                                    <p style="margin: 0;"><strong>Root Admin</strong> revoked a certificate for invalid
                                        ID (2026CIV099).</p>
                                    <span class="timeline-time">Yesterday, 14:30 PM</span>
                                </div>
                            </div>

                        </div>
                    </div>
                </section>

                <!-- ================= MODULE: EVENTS ================= -->
                <section id="eventsModule" class="module-section">
                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                        <div>
                            <h1 style="font-size: 2.2rem; margin-bottom: 0.5rem; font-weight: 700;">Event Control
                                Center</h1>
                            <p class="text-secondary" style="font-size: 1.05rem;">Publish new events, manage existing
                                logistics, and track capacities.</p>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 2rem;">

                        <!-- CREATE NEW EVENT FORM -->
                        <div class="glass"
                            style="padding: 2rem; border-radius: var(--radius-lg); position: sticky; top: 100px; height: fit-content;">
                            <h2
                                style="font-size: 1.3rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.8rem;">
                                <div
                                    style="width: 32px; height: 32px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white;">
                                    <i class="fa-solid fa-plus"></i>
                                </div>
                                Create New Event
                            </h2>

                            <form id="createEventForm">
                                <div class="form-floating mb-4">
                                    <input type="text" id="evTitle" class="form-control" placeholder="Event Title"
                                        required>
                                    <label for="evTitle">Event Title</label>
                                </div>

                                <div class="form-floating mb-4">
                                    <textarea id="evDesc" class="form-control" placeholder="Description" rows="3"
                                        style="height: auto; padding-top: 1.5rem;" required></textarea>
                                    <label for="evDesc">Short Description</label>
                                </div>

                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                                    <div class="form-group" style="margin: 0;">
                                        <label class="form-label text-secondary"
                                            style="font-size: 0.8rem;">Category</label>
                                        <select id="evCat" class="form-control" required
                                            style="border-radius: var(--radius-md);">
                                            <option value="Technical">Technical</option>
                                            <option value="Cultural">Cultural</option>
                                            <option value="Workshop">Workshop</option>
                                            <option value="Hackathon">Hackathon</option>
                                        </select>
                                    </div>
                                    <div class="form-floating" style="margin: 0;">
                                        <input type="number" id="evXP" class="form-control" placeholder="XP Reward"
                                            required min="50" max="1000">
                                        <label for="evXP">XP Reward</label>
                                    </div>
                                </div>

                                <div
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                                    <div class="form-floating" style="margin: 0;">
                                        <input type="datetime-local" id="evDate" class="form-control"
                                            placeholder="Date & Time" required>
                                        <label for="evDate">Launch Date & Time</label>
                                    </div>
                                    <div class="form-floating" style="margin: 0;">
                                        <input type="number" id="evSeats" class="form-control" placeholder="Max Seats"
                                            required min="10" max="5000">
                                        <label for="evSeats">Max Participants</label>
                                    </div>
                                </div>

                                <div class="form-floating mb-4" style="margin: 0;">
                                    <input type="text" id="evVenue" class="form-control" placeholder="Venue Location"
                                        required>
                                    <label for="evVenue">Venue Location</label>
                                </div>

                                <hr style="border-color: var(--card-border); margin: 1.5rem 0;">

                                <!-- Advanced Toggles -->
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <span style="font-weight: 500; font-size: 0.95rem;">Highlight as Featured
                                        Event</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="evFeatured">
                                        <span class="slider round"></span>
                                    </label>
                                </div>

                                <button type="submit" class="btn btn-primary"
                                    style="width: 100%; justify-content: center; margin-top: 1rem; padding: 1rem; border-radius: var(--radius-pill);">
                                    Publish Event <i class="fa-solid fa-paper-plane" style="margin-left: 0.5rem;"></i>
                                </button>
                            </form>
                        </div>

                        <!-- MANAGE EVENTS DATA GRID -->
                        <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                            <div class="grid-toolbar"
                                style="border-radius: var(--radius-lg); padding: 1rem 1.5rem; background: var(--admin-surface);">
                                <div style="position: relative; width: 350px;">
                                    <i class="fa-solid fa-magnifying-glass"
                                        style="position: absolute; left: 1.2rem; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                                    <input type="text" id="eventSearchInput" placeholder="Search events..."
                                        style="width: 100%; padding: 0.7rem 1rem 0.7rem 3rem; border-radius: var(--radius-pill); border: 1px solid var(--card-border); background: var(--bg-color); color: var(--text-primary);">
                                </div>

                                <div class="filter-chips" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                    <button class="chip active">All Events</button>
                                    <button class="chip">Upcoming</button>
                                    <button class="chip">Completed</button>
                                </div>
                            </div>

                            <div class="data-grid-wrap shadow-soft"
                                style="border: none; box-shadow: 0 10px 30px -10px rgba(0,0,0,0.05);">

                                <!-- Bulk Actions Bar -->
                                <div id="eventBulkActionsBar"
                                    style="padding: 1rem 1.5rem; background: rgba(99,102,241,0.05); border-bottom: 1px solid var(--card-border); display: flex; justify-content: space-between; align-items: center; display: none;">
                                    <span id="eventBulkCount" style="font-weight: 600; color: var(--primary-color);">0
                                        Events Selected</span>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <button class="btn btn-outline btn-sm"
                                            onclick="EventAdmin.bulkMarkStatus('upcoming')"><i
                                                class="fa-solid fa-clock"></i> Upcoming</button>
                                        <button class="btn btn-outline btn-sm"
                                            onclick="EventAdmin.bulkMarkStatus('ongoing')"><i
                                                class="fa-solid fa-play"></i> Ongoing</button>
                                        <button class="btn btn-outline btn-sm"
                                            onclick="EventAdmin.bulkMarkStatus('completed')"><i
                                                class="fa-solid fa-check-double"></i> Completed</button>
                                        <button class="btn btn-primary btn-sm btn-danger"
                                            onclick="EventAdmin.bulkDelete()"><i class="fa-solid fa-trash"></i>
                                            Delete</button>
                                    </div>
                                </div>

                                <div style="overflow-x: auto;">
                                    <table class="admin-table smart-table" id="adminEventsTable">
                                        <thead>
                                            <tr>
                                                <th style="width: 40px; padding-left: 1.5rem;"><input type="checkbox"
                                                        id="selectAllEvents"></th>
                                                <th class="sortable" data-sort="title" style="cursor: pointer;">Event
                                                    Log <i class="fa-solid fa-sort"
                                                        style="color: #cbd5e1; margin-left: 0.5rem;"></i></th>
                                                <th class="sortable" data-sort="category" style="cursor: pointer;">
                                                    Category & XP <i class="fa-solid fa-sort"
                                                        style="color: #cbd5e1; margin-left: 0.5rem;"></i></th>
                                                <th class="sortable" data-sort="seats" style="cursor: pointer;">Capacity
                                                    & Date <i class="fa-solid fa-sort"
                                                        style="color: #cbd5e1; margin-left: 0.5rem;"></i></th>
                                                <th class="sortable" data-sort="status" style="cursor: pointer;">Status
                                                    <i class="fa-solid fa-sort"
                                                        style="color: #cbd5e1; margin-left: 0.5rem;"></i>
                                                </th>
                                                <th style="text-align: right; padding-right: 1.5rem;">Settings</th>
                                            </tr>
                                        </thead>
                                        <tbody id="adminEventsTbody">
                                            <!-- Dynamic Rows injected via JS -->
                                        </tbody>
                                    </table>
                                </div>

                                <div
                                    style="padding: 1rem 1.5rem; background: rgba(0,0,0,0.01); display: flex; justify-content: space-between; align-items: center; color: var(--text-secondary); font-size: 0.9rem; border-top: 1px solid var(--card-border);">
                                    <span id="eventPagInfo">Showing 0 entries</span>
                                    <div style="display: flex; gap: 0.5rem;" id="eventPagination">
                                        <!-- Pagination dynamically injected -->
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>


                </section>

                <!-- ================= MODULE: CERTIFICATES ================= -->
                <section id="certificatesModule" class="module-section">
                    <div style="margin-bottom: 2rem;">
                        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Certificate Issuance System</h1>
                        <p class="text-secondary">Preview, generate, and revoke digital credentials securely.</p>
                    </div>
                    <div class="data-grid-wrap">
                        <div class="grid-toolbar">
                            <div class="topbar-search"><i class="fa-solid fa-magnifying-glass"></i><input type="text"
                                    placeholder="Search ID or Name..."></div>
                        </div>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Cert ID</th>
                                    <th>Student Name</th>
                                    <th>Event</th>
                                    <th>Status</th>
                                    <th style="text-align: right;">Operations</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="font-family: monospace; color: var(--text-secondary);">CERT-904A-X</td>
                                    <td>Alex Carter</td>
                                    <td>Tech Symposium</td>
                                    <td><span class="status-badge success">Issued</span></td>
                                    <td style="text-align: right;">
                                        <a href="certificate.html" target="_blank" class="action-btn edit"
                                            title="Preview"><i class="fa-solid fa-eye"></i></a>
                                        <button class="action-btn" style="color: var(--color-info);" title="Email"><i
                                                class="fa-solid fa-envelope"></i></button>
                                        <button class="action-btn delete" title="Revoke"
                                            onclick="window.showToast('Certificate Revoked.', 'error')"><i
                                                class="fa-solid fa-ban"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- ================= MODULE: ROLES ================= -->
                <section id="rolesModule" class="module-section">
                    <div style="margin-bottom: 2rem;">
                        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Access Control Matrix</h1>
                        <p class="text-secondary">Define permissions for faculty and staff.</p>
                    </div>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <div class="glass"
                            style="padding: 1.5rem; border-radius: var(--radius-lg); border-top: 4px solid var(--primary-color);">
                            <h3 style="margin-bottom: 0.5rem;">Super Admin</h3>
                            <p class="text-secondary" style="font-size: 0.9rem; margin-bottom: 1rem;">Full system access
                                including destructive operations.</p>
                            <ul
                                style="list-style: none; display: flex; flex-direction: column; gap: 0.5rem; font-size: 0.9rem; margin-bottom: 1.5rem;">
                                <li><i class="fa-solid fa-check text-primary"></i> Manage Admins</li>
                                <li><i class="fa-solid fa-check text-primary"></i> Revoke Certificates</li>
                                <li><i class="fa-solid fa-check text-primary"></i> View Global Analytics</li>
                            </ul>
                            <button class="btn btn-outline" style="width: 100%;">Edit Role</button>
                        </div>
                        <div class="glass"
                            style="padding: 1.5rem; border-radius: var(--radius-lg); border-top: 4px solid var(--color-success);">
                            <h3 style="margin-bottom: 0.5rem;">Event Coordinator</h3>
                            <p class="text-secondary" style="font-size: 0.9rem; margin-bottom: 1rem;">Can edit events
                                and trigger auto-issuance.</p>
                            <ul
                                style="list-style: none; display: flex; flex-direction: column; gap: 0.5rem; font-size: 0.9rem; margin-bottom: 1.5rem;">
                                <li><i class="fa-solid fa-check text-primary"></i> Create/Edit Events</li>
                                <li><i class="fa-solid fa-check text-primary"></i> Mark Attendance</li>
                                <li><i class="fa-solid fa-xmark text-secondary"></i> Revoke Certificates</li>
                            </ul>
                            <button class="btn btn-outline" style="width: 100%;">Edit Role</button>
                        </div>
                    </div>
                </section>

                <!-- ================= MODULE: SYSTEM SETTINGS ================= -->
                <section id="settingsModule" class="module-section">
                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                        <div>
                            <h1 style="font-size: 2.2rem; margin-bottom: 0.5rem; font-weight: 700;">System Settings</h1>
                            <p class="text-secondary" style="font-size: 1.05rem;">Manage platform configurations,
                                security, and administrative access.</p>
                        </div>
                    </div>

                    <!-- Layout: Sidebar Tabs + Content Area -->
                    <div class="settings-layout">

                        <!-- Settings Internal Nav -->
                        <div class="settings-sidebar glass">
                            <nav class="settings-menu">
                                <a href="#" class="settings-tab-link active" data-tab="st-profile">
                                    <i class="fa-solid fa-user"></i> Profile Info
                                </a>
                                <a href="#" class="settings-tab-link" data-tab="st-security">
                                    <i class="fa-solid fa-shield-halved"></i> Security
                                </a>
                                <a href="#" class="settings-tab-link" data-tab="st-notifications">
                                    <i class="fa-solid fa-bell"></i> Notifications
                                </a>
                                <a href="#" class="settings-tab-link" data-tab="st-preferences">
                                    <i class="fa-solid fa-palette"></i> Preferences
                                </a>
                                <div class="settings-divider">Super Admin</div>
                                <a href="#" class="settings-tab-link" data-tab="st-config">
                                    <i class="fa-solid fa-sliders"></i> Configuration
                                </a>
                                <a href="#" class="settings-tab-link" data-tab="st-roles">
                                    <i class="fa-solid fa-users-gear"></i> Roles & Permissions
                                </a>
                            </nav>
                        </div>

                        <!-- Settings Content Panels -->
                        <div class="settings-content-wrap">

                            <!-- TAB: Profile -->
                            <div id="st-profile" class="settings-pane active">
                                <h2 class="settings-pane-title">Personal Profile</h2>
                                <div class="glass settings-card">
                                    <form class="settings-form" id="form-profile">
                                        <!-- Avatar Upload -->
                                        <div class="avatar-upload-zone">
                                            <div class="avatar-preview">
                                                <img src="https://ui-avatars.com/api/?name=Admin+Root&background=6366f1&color=fff"
                                                    id="profileImgPreview">
                                                <div class="avatar-edit-overlay"><i class="fa-solid fa-camera"></i>
                                                </div>
                                            </div>
                                            <div class="avatar-upload-text">
                                                <h4>Profile Picture</h4>
                                                <p>JPG, GIF or PNG. 1MB max.</p>
                                                <button type="button" class="btn btn-outline btn-sm">Upload New</button>
                                                <button type="button" class="btn btn-sm btn-danger-text"
                                                    style="background:transparent;">Remove</button>
                                            </div>
                                        </div>

                                        <div class="form-grid-2">
                                            <div class="form-floating">
                                                <input type="text" class="form-control" id="st-fullname"
                                                    value="Admin Root">
                                                <label for="st-fullname">Full Name</label>
                                            </div>
                                            <div class="form-floating">
                                                <input type="text" class="form-control" id="st-display" value="Root">
                                                <label for="st-display">Display Name</label>
                                            </div>
                                        </div>

                                        <div class="form-grid-2">
                                            <div class="form-floating">
                                                <input type="email" class="form-control" id="st-email"
                                                    value="root@college.edu">
                                                <label for="st-email">Email Address</label>
                                            </div>
                                            <div class="form-floating">
                                                <input type="tel" class="form-control" id="st-phone"
                                                    value="+1 (555) 123-4567">
                                                <label for="st-phone">Phone Number</label>
                                            </div>
                                        </div>

                                        <div class="form-grid-2">
                                            <div class="form-floating">
                                                <input type="text" class="form-control" value="Directorate" readonly
                                                    style="background: rgba(0,0,0,0.1); cursor: not-allowed;">
                                                <label>Department</label>
                                            </div>
                                            <div class="form-floating">
                                                <input type="text" class="form-control" value="Super Administrator"
                                                    readonly style="background: rgba(0,0,0,0.1); cursor: not-allowed;">
                                                <label>System Role <i class="fa-solid fa-lock text-secondary"
                                                        style="font-size: 0.7rem; margin-top: -5px; margin-left: 2px;"></i></label>
                                            </div>
                                        </div>

                                        <div class="form-floating" style="margin-top: 1rem;">
                                            <textarea class="form-control" placeholder="Bio"
                                                style="height: 100px;"></textarea>
                                            <label>Bio / About</label>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <!-- TAB: Security -->
                            <div id="st-security" class="settings-pane">
                                <h2 class="settings-pane-title">Security Settings</h2>

                                <div class="glass settings-card mb-4">
                                    <h3
                                        style="font-size: 1.1rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
                                        <i class="fa-solid fa-key text-primary"></i> Change Password
                                    </h3>
                                    <form class="settings-form form-grid-2" style="align-items: flex-end;"
                                        id="form-security">
                                        <div class="form-floating" style="flex: 1; grid-column: span 2;">
                                            <input type="password" class="form-control" placeholder="Current Password">
                                            <label>Current Password</label>
                                        </div>
                                        <div class="form-floating">
                                            <input type="password" class="form-control" placeholder="New Password">
                                            <label>New Password</label>
                                            <div class="password-strength">
                                                <div class="strength-bar">
                                                    <div class="fill"
                                                        style="width: 60%; background: var(--color-warning);"></div>
                                                </div>
                                                <span class="strength-text"
                                                    style="color: var(--color-warning);">Moderate</span>
                                            </div>
                                        </div>
                                        <div class="form-floating">
                                            <input type="password" class="form-control" placeholder="Confirm Password">
                                            <label>Confirm Password</label>
                                        </div>
                                    </form>
                                    <div style="margin-top: 1rem; text-align: right;">
                                        <button class="btn btn-outline" style="border-radius: var(--radius-pill);"
                                            onclick="window.triggerConfirmModal('Change your password?', 'You will be required to login again on all devices.', () => window.showToast('Password Updated. Please log back in.', 'success'))">Update
                                            Password</button>
                                    </div>
                                </div>

                                <div class="glass settings-card mb-4"
                                    style="display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <h3 style="font-size: 1.1rem; margin-bottom: 0.3rem;"><i
                                                class="fa-solid fa-mobile-screen-button text-primary"></i> Two-Factor
                                            Authentication (2FA)</h3>
                                        <p class="text-secondary" style="font-size: 0.9rem; margin: 0;">Add an extra
                                            layer of security to your account.</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="sec-2fa">
                                        <span class="slider round"></span>
                                    </label>
                                </div>

                                <div class="glass settings-card">
                                    <h3 style="font-size: 1.1rem; margin-bottom: 1rem;"><i
                                            class="fa-solid fa-display text-primary"></i> Active Sessions</h3>
                                    <div class="session-list">
                                        <div class="session-item">
                                            <div class="session-icon text-success"><i class="fa-brands fa-windows"></i>
                                            </div>
                                            <div class="session-info">
                                                <h4>Windows • Chrome <span class="badge"
                                                        style="background: rgba(16,185,129,0.1); color: var(--color-success); font-size: 0.6rem; margin-left: 0.5rem; padding: 0.1rem 0.4rem;">Current
                                                        Session</span></h4>
                                                <p>IP: 192.168.1.45 • Last active: Just now</p>
                                            </div>
                                        </div>
                                        <div class="session-item">
                                            <div class="session-icon text-secondary"><i class="fa-brands fa-apple"></i>
                                            </div>
                                            <div class="session-info">
                                                <h4>iPhone 14 Pro • Safari</h4>
                                                <p>IP: 104.28.10.15 • Last active: 2 hours ago</p>
                                            </div>
                                            <button class="btn btn-outline btn-sm"
                                                style="color: var(--color-danger); border-color: var(--card-border);"
                                                onclick="window.triggerConfirmModal('Revoke this session?', 'This device will be logged out immediately.', () => this.parentElement.remove())"><i
                                                    class="fa-solid fa-xmark"></i> Revoke</button>
                                        </div>
                                    </div>
                                    <div
                                        style="margin-top: 1.5rem; border-top: 1px solid var(--card-border); padding-top: 1rem;">
                                        <button class="btn btn-outline btn-danger-text"
                                            onclick="window.triggerConfirmModal('Log out of all other sessions?', 'You will remain logged in on this exact browser only.', () => window.showToast('All other sessions terminated.', 'success'))"><i
                                                class="fa-solid fa-right-from-bracket"></i> Log out all other
                                            sessions</button>
                                    </div>
                                </div>
                            </div>

                            <!-- TAB: Notifications -->
                            <div id="st-notifications" class="settings-pane">
                                <h2 class="settings-pane-title">Notification Preferences</h2>
                                <div class="glass settings-card">

                                    <p class="text-secondary" style="margin-bottom: 1.5rem; font-size: 0.9rem;">
                                        Configure when and how you receive alerts from the EventSys platform.</p>

                                    <!-- Delivery Matrix Header -->
                                    <div class="notif-header"
                                        style="display: grid; grid-template-columns: 2fr 1fr 1fr; align-items: center; border-bottom: 1px solid var(--card-border); padding-bottom: 0.5rem; margin-bottom: 1rem; font-size: 0.85rem; font-weight: 600; color: var(--text-secondary);">
                                        <div>Event Type</div>
                                        <div style="text-align: center;"><i class="fa-solid fa-desktop"></i> In-App
                                        </div>
                                        <div style="text-align: center;"><i class="fa-solid fa-envelope"></i> Email
                                        </div>
                                    </div>

                                    <div class="notif-row"
                                        style="display: grid; grid-template-columns: 2fr 1fr 1fr; align-items: center; padding: 1rem 0; border-bottom: 1px solid rgba(0,0,0,0.05);">
                                        <div>
                                            <h4 style="margin: 0; font-size: 0.95rem;">New Student Registrations</h4>
                                            <p class="text-secondary" style="font-size: 0.8rem; margin: 0;">When a
                                                student signs up for a new event</p>
                                        </div>
                                        <div style="text-align: center;"><label class="toggle-switch"><input
                                                    type="checkbox" checked id="notif-inapp-events"><span
                                                    class="slider round"></span></label>
                                        </div>
                                        <div style="text-align: center;"><label class="toggle-switch"><input
                                                    type="checkbox" id="notif-email-events"><span
                                                    class="slider round"></span></label></div>
                                    </div>

                                    <div class="notif-row"
                                        style="display: grid; grid-template-columns: 2fr 1fr 1fr; align-items: center; padding: 1rem 0; border-bottom: 1px solid rgba(0,0,0,0.05);">
                                        <div>
                                            <h4 style="margin: 0; font-size: 0.95rem;">Certificate Eligibility Alerts
                                            </h4>
                                            <p class="text-secondary" style="font-size: 0.8rem; margin: 0;">When
                                                students hit XP milestones</p>
                                        </div>
                                        <div style="text-align: center;"><label class="toggle-switch"><input
                                                    type="checkbox" checked id="notif-inapp-security"><span
                                                    class="slider round"></span></label>
                                        </div>
                                        <div style="text-align: center;"><label class="toggle-switch"><input
                                                    type="checkbox" checked id="notif-email-security"><span
                                                    class="slider round"></span></label>
                                        </div>
                                    </div>

                                    <div class="notif-row"
                                        style="display: grid; grid-template-columns: 2fr 1fr 1fr; align-items: center; padding: 1rem 0; border-bottom: 1px solid rgba(0,0,0,0.05);">
                                        <div>
                                            <h4 style="margin: 0; font-size: 0.95rem;">Event Capacity Warnings</h4>
                                            <p class="text-secondary" style="font-size: 0.8rem; margin: 0;">When an
                                                event hits 90% capacity</p>
                                        </div>
                                        <div style="text-align: center;"><label class="toggle-switch"><input
                                                    type="checkbox" checked><span class="slider round"></span></label>
                                        </div>
                                        <div style="text-align: center;"><label class="toggle-switch"><input
                                                    type="checkbox" checked><span class="slider round"></span></label>
                                        </div>
                                    </div>

                                    <div class="notif-row"
                                        style="display: grid; grid-template-columns: 2fr 1fr 1fr; align-items: center; padding: 1rem 0; border-bottom: 1px solid rgba(0,0,0,0.05);">
                                        <div>
                                            <h4 style="margin: 0; font-size: 0.95rem;">Weekly Summary Reports</h4>
                                            <p class="text-secondary" style="font-size: 0.8rem; margin: 0;">Automated
                                                insights every Monday at 9AM</p>
                                        </div>
                                        <div style="text-align: center;"><label class="toggle-switch"><input
                                                    type="checkbox" id="notif-inapp-summary"><span
                                                    class="slider round"></span></label></div>
                                        <div style="text-align: center;"><label class="toggle-switch"><input
                                                    type="checkbox" checked id="notif-email-summary"><span
                                                    class="slider round"></span></label>
                                        </div>
                                    </div>

                                    <div class="notif-row"
                                        style="display: grid; grid-template-columns: 2fr 1fr 1fr; align-items: center; padding: 1rem 0;">
                                        <div>
                                            <h4 style="margin: 0; font-size: 0.95rem;">System Updates</h4>
                                            <p class="text-secondary" style="font-size: 0.8rem; margin: 0;">Patches,
                                                maintenance, and platform news</p>
                                        </div>
                                        <div style="text-align: center;"><label class="toggle-switch"><input
                                                    type="checkbox" checked><span class="slider round"></span></label>
                                        </div>
                                        <div style="text-align: center;"><label class="toggle-switch"><input
                                                    type="checkbox" checked><span class="slider round"></span></label>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <!-- TAB: Preferences -->
                            <div id="st-preferences" class="settings-pane">
                                <h2 class="settings-pane-title">Workspace Preferences</h2>

                                <div class="glass settings-card mb-4">
                                    <h3 style="font-size: 1.1rem; margin-bottom: 1rem;"><i
                                            class="fa-solid fa-wand-magic-sparkles text-primary"></i> Theme & Aesthetics
                                    </h3>

                                    <div
                                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                                        <div class="theme-select-card active" data-theme-val="dark"
                                            onclick="document.querySelectorAll('.theme-select-card').forEach(c=>c.classList.remove('active')); this.classList.add('active'); document.getElementById('settingsSaveBar').classList.add('active');">
                                            <div class="theme-preview dark"></div>
                                            <span>Dark Mode</span>
                                        </div>
                                        <div class="theme-select-card" data-theme-val="light"
                                            onclick="document.querySelectorAll('.theme-select-card').forEach(c=>c.classList.remove('active')); this.classList.add('active'); document.getElementById('settingsSaveBar').classList.add('active');">
                                            <div class="theme-preview light"></div>
                                            <span>Light Mode</span>
                                        </div>
                                        <div class="theme-select-card" data-theme-val="system"
                                            onclick="document.querySelectorAll('.theme-select-card').forEach(c=>c.classList.remove('active')); this.classList.add('active'); document.getElementById('settingsSaveBar').classList.add('active');">
                                            <div class="theme-preview"
                                                style="background: linear-gradient(135deg, #1e293b 50%, #f8fafc 50%);">
                                            </div>
                                            <span>System Default</span>
                                        </div>
                                    </div>

                                    <h4 style="font-size: 0.9rem; margin-bottom: 0.5rem; font-weight: 500;">Accent Color
                                        <span class="badge" style="font-size: 0.6rem; margin-left: 0.5rem;">Beta</span>
                                    </h4>
                                    <div style="display: flex; gap: 0.5rem;" id="accentColorSelector">
                                        <div class="color-swatch active" data-color-val="indigo"
                                            style="background: #6366f1;"></div>
                                        <div class="color-swatch" data-color-val="purple" style="background: #a855f7;">
                                        </div>
                                        <div class="color-swatch" data-color-val="emerald" style="background: #10b981;">
                                        </div>
                                        <div class="color-swatch" data-color-val="rose" style="background: #e11d48;">
                                        </div>
                                    </div>
                                </div>

                                <div class="glass settings-card">
                                    <h3 style="font-size: 1.1rem; margin-bottom: 1rem;"><i
                                            class="fa-solid fa-layer-group text-primary"></i> UI & Animations</h3>
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; border-bottom: 1px solid var(--card-border);">
                                        <div>
                                            <h4 style="margin: 0; font-size: 0.95rem;">Enable UI Animations</h4>
                                            <p class="text-secondary" style="font-size: 0.8rem; margin: 0;">Toggle
                                                micro-interactions, page transitions, and hover effects.</p>
                                        </div>
                                        <label class="toggle-switch"><input type="checkbox" checked
                                                id="pref-animations"><span class="slider round"></span></label>
                                    </div>
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; padding: 1rem 0;">
                                        <div>
                                            <h4 style="margin: 0; font-size: 0.95rem;">Compact View</h4>
                                            <p class="text-secondary" style="font-size: 0.8rem; margin: 0;">Reduce
                                                padding and structural gaps to show more data per screen.</p>
                                        </div>
                                        <label class="toggle-switch"><input type="checkbox" id="pref-compact"><span
                                                class="slider round"></span></label>
                                    </div>
                                </div>

                            </div>

                            <!-- TAB: Config (SuperAdmin) -->
                            <div id="st-config" class="settings-pane">
                                <h2 class="settings-pane-title">System Configuration <span class="badge"
                                        style="background: rgba(239,68,68,0.1); color: var(--color-danger); margin-left: 0.5rem;"><i
                                            class="fa-solid fa-lock"></i> Super Admin</span></h2>

                                <div class="glass settings-card mb-4"
                                    style="border-left: 3px solid var(--color-warning);">
                                    <h3 style="font-size: 1.1rem; margin-bottom: 0.5rem;"><i
                                            class="fa-solid fa-triangle-exclamation text-warning"></i> Gamification
                                        Rules</h3>
                                    <p class="text-secondary" style="font-size: 0.85rem; margin-bottom: 1.5rem;">
                                        Altering baseline XP formulas or Level thresholds will trigger a global
                                        recalculation of all student tiers. Ensure you notify the student body
                                        beforehand.</p>

                                    <div class="form-grid-2">
                                        <div class="form-group">
                                            <label class="form-label" style="font-size: 0.85rem;">Global XP
                                                Multiplier</label>
                                            <input type="number" class="form-control" id="cfg-xp-multiplier" value="1.0"
                                                step="0.1">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label" style="font-size: 0.85rem;">Base XP for Level
                                                Up</label>
                                            <input type="number" class="form-control" id="cfg-base-level" value="100"
                                                step="10">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label" style="font-size: 0.85rem;">Certificate Auto-Issue
                                                Threshold</label>
                                            <select class="form-control">
                                                <option>1000 XP (Master)</option>
                                                <option selected>2000 XP (Grandmaster)</option>
                                                <option>Disabled (Manual Only)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="glass settings-card">
                                    <h3 style="font-size: 1.1rem; margin-bottom: 1.5rem;"><i
                                            class="fa-solid fa-calendar-days text-primary"></i> Event Defaults</h3>
                                    <div class="form-grid-2">
                                        <div class="form-group">
                                            <label class="form-label" style="font-size: 0.85rem;">Default Max
                                                Participants</label>
                                            <input type="number" class="form-control" value="150">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label" style="font-size: 0.85rem;">Registration Deadline
                                                Window</label>
                                            <select class="form-control">
                                                <option>24 Hours before event</option>
                                                <option selected>48 Hours before event</option>
                                                <option>1 Week before event</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- TAB: Roles (SuperAdmin) -->
                            <div id="st-roles" class="settings-pane">
                                <h2 class="settings-pane-title"
                                    style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>Roles & Permissions</span>
                                    <button class="btn btn-primary btn-sm"><i class="fa-solid fa-plus"></i> New
                                        Role</button>
                                </h2>

                                <div class="glass settings-card" style="padding: 0; overflow: hidden;">
                                    <table class="admin-table permission-matrix">
                                        <thead>
                                            <tr>
                                                <th style="padding-left: 1.5rem;">Role Name</th>
                                                <th style="text-align: center;">Events</th>
                                                <th style="text-align: center;">Students</th>
                                                <th style="text-align: center;">Certs</th>
                                                <th style="text-align: center;">Settings</th>
                                                <th style="text-align: right; padding-right: 1.5rem;">Manage</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td style="padding-left: 1.5rem;">
                                                    <div style="font-weight: 600;">Super Administrator</div>
                                                    <div style="font-size: 0.75rem; color: var(--text-secondary);">Full
                                                        system access</div>
                                                </td>
                                                <td style="text-align: center;"><i
                                                        class="fa-solid fa-check text-success"></i></td>
                                                <td style="text-align: center;"><i
                                                        class="fa-solid fa-check text-success"></i></td>
                                                <td style="text-align: center;"><i
                                                        class="fa-solid fa-check text-success"></i></td>
                                                <td style="text-align: center;"><i
                                                        class="fa-solid fa-check text-success"></i></td>
                                                <td style="text-align: right; padding-right: 1.5rem; opacity: 0.5;"><i
                                                        class="fa-solid fa-lock text-secondary"></i></td>
                                            </tr>
                                            <tr>
                                                <td style="padding-left: 1.5rem;">
                                                    <div style="font-weight: 600;">Event Organizer</div>
                                                    <div style="font-size: 0.75rem; color: var(--text-secondary);">
                                                        Manage events & attendance</div>
                                                </td>
                                                <td style="text-align: center;"><i
                                                        class="fa-solid fa-check text-success"></i></td>
                                                <td style="text-align: center;"><i class="fa-solid fa-eye text-primary"
                                                        title="Read Only"></i></td>
                                                <td style="text-align: center;"><i class="fa-solid fa-xmark text-danger"
                                                        style="opacity: 0.3;"></i></td>
                                                <td style="text-align: center;"><i class="fa-solid fa-xmark text-danger"
                                                        style="opacity: 0.3;"></i></td>
                                                <td style="text-align: right; padding-right: 1.5rem;">
                                                    <button class="btn btn-outline btn-sm">Edit</button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding-left: 1.5rem;">
                                                    <div style="font-weight: 600;">Academic Dean</div>
                                                    <div style="font-size: 0.75rem; color: var(--text-secondary);">
                                                        Oversee certs & students</div>
                                                </td>
                                                <td style="text-align: center;"><i
                                                        class="fa-solid fa-eye text-primary"></i></td>
                                                <td style="text-align: center;"><i
                                                        class="fa-solid fa-check text-success"></i></td>
                                                <td style="text-align: center;"><i
                                                        class="fa-solid fa-check text-success"></i></td>
                                                <td style="text-align: center;"><i class="fa-solid fa-xmark text-danger"
                                                        style="opacity: 0.3;"></i></td>
                                                <td style="text-align: right; padding-right: 1.5rem;">
                                                    <button class="btn btn-outline btn-sm">Edit</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Sticky Save Footer (Applies contextually via JS) -->
                    <div class="settings-save-bar" id="settingsSaveBar">
                        <span class="text-secondary" style="font-size: 0.9rem;" id="unsavedChangesText">You have unsaved
                            changes.</span>
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn btn-outline" style="border-radius: var(--radius-pill);"
                                onclick="window.discardSettings()">Discard</button>
                            <button class="btn btn-primary" style="border-radius: var(--radius-pill);"
                                id="btnSaveSettings" onclick="window.saveSettings()">Save Changes</button>
                        </div>
                    </div>

                </section>

                <!-- Floating Modal Container (For confirm modals inside Admin interface) -->
                <div id="adminModalOverlay" class="admin-modal-overlay">
                    <div class="admin-modal-box glass shadow-lg">
                        <div class="modal-icon warning"><i class="fa-solid fa-triangle-exclamation"></i></div>
                        <h3 id="adminModalTitle">Are you sure?</h3>
                        <p id="adminModalDesc" class="text-secondary">This action cannot be undone.</p>
                        <div class="modal-actions">
                            <button class="btn btn-outline" onclick="window.closeAdminModal()">Cancel</button>
                            <button class="btn btn-primary btn-danger" id="adminModalConfirmBtn">Yes, Proceed</button>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- Slide-in Drawer Component structure -->
    <div class="slide-drawer-overlay" id="drawerOverlay" onclick="window.closeDrawer()"></div>
    <div class="slide-drawer" id="slideDrawer">
        <div class="drawer-header">
            <h2 style="font-size: 1.25rem; font-weight: 600;" id="drawerTitle">Drawer Title</h2>
            <button class="action-btn" onclick="window.closeDrawer()"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div class="drawer-body">
            <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" class="form-control" value="Alex Carter"
                    style="background: var(--bg-color); color: var(--text-primary); border-color: var(--card-border);">
            </div>
            <div class="form-group">
                <label class="form-label">Account Status</label>
                <select class="form-control"
                    style="background: var(--bg-color); color: var(--text-primary); border-color: var(--card-border);">
                    <option>Active</option>
                    <option>Suspended</option>
                </select>
            </div>
            <div
                style="background: rgba(245, 158, 11, 0.1); border-left: 4px solid var(--color-warning); padding: 1rem; border-radius: var(--radius-sm); margin-top: 2rem;">
                <p style="margin:0; font-size: 0.9rem; color: var(--color-warning);"><i
                        class="fa-solid fa-triangle-exclamation"></i> Editing core attributes may reset gamification XP.
                </p>
            </div>
        </div>
        <div class="drawer-footer">
            <button class="btn btn-outline" onclick="window.closeDrawer()">Cancel</button>
            <button class="btn btn-primary"
                onclick="window.closeDrawer(); window.showToast('Updates saved successfully.')">Save Changes</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script>
        // Enforce Admin login
        AuthManager.guard(['admin']);
    </script>
    <script src="admin.js"></script>
</body>

</html>