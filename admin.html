<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - EventSys</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Global & Admin Specific Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="admin-mode">

    <div class="admin-layout">

        <!-- Collapsible Sidebar -->
        <aside class="admin-sidebar" id="adminSidebar">
            <div class="sidebar-header">
                <div
                    style="width: 32px; height: 32px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white;">
                    <i class="fa-solid fa-graduation-cap"></i>
                </div>
                <span class="text-gradient" style="font-weight: 700; font-size: 1.2rem;">EventSys</span>
                <button class="sidebar-toggle" id="sidebarToggle" style="margin-left: auto;">
                    <i class="fa-solid fa-bars-staggered"></i>
                </button>
            </div>

            <nav class="sidebar-menu">
                <a href="#" class="sidebar-item active" data-target="dashboardModule">
                    <i class="fa-solid fa-chart-pie"></i> <span>Dashboard</span>
                </a>
                <a href="#" class="sidebar-item" data-target="studentsModule">
                    <i class="fa-solid fa-user-graduate"></i> <span>Students</span>
                </a>
                <a href="#" class="sidebar-item" data-target="eventsModule">
                    <i class="fa-solid fa-calendar-days"></i> <span>Events Setup</span>
                </a>
                <a href="#" class="sidebar-item" data-target="registrationsModule">
                    <i class="fa-solid fa-clipboard-user"></i> <span>Registrations</span>
                </a>
                <a href="#" class="sidebar-item" data-target="certificatesModule">
                    <i class="fa-solid fa-file-certificate"></i> <span>Certificates</span>
                </a>
                <div style="margin: 1rem 0; font-size: 0.75rem; text-transform: uppercase; color: var(--text-secondary); font-weight: 600; padding: 0 1rem;"
                    class="sidebar-label">System</div>
                <a href="#" class="sidebar-item" data-target="logsModule">
                    <i class="fa-solid fa-timeline"></i> <span>Activity Logs</span>
                </a>
                <a href="#" class="sidebar-item" data-target="rolesModule">
                    <i class="fa-solid fa-shield-halved"></i> <span>Roles & Access</span>
                </a>
                <a href="#" class="sidebar-item">
                    <i class="fa-solid fa-gear"></i> <span>Settings</span>
                </a>
            </nav>

            <div style="padding: 1.5rem 1rem; border-top: 1px solid var(--card-border);">
                <a href="login.html" class="sidebar-item" style="color: var(--color-danger);">
                    <i class="fa-solid fa-arrow-right-from-bracket"></i> <span>Logout Session</span>
                </a>
            </div>
        </aside>

        <!-- Main Content Wrap -->
        <div class="admin-main-wrap">

            <!-- Top Navbar -->
            <header class="admin-topbar">
                <div class="topbar-search">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" placeholder="Search events, students, or IDs...">
                </div>

                <div class="topbar-actions">
                    <button class="btn btn-primary" onclick="window.openDrawer('Create New Event')"
                        style="padding: 0.5rem 1.2rem; border-radius: var(--radius-pill);">
                        <i class="fa-solid fa-plus"></i> New Event
                    </button>

                    <button class="topbar-icon" id="adminThemeToggle" title="Toggle Theme">
                        <i class="fa-solid fa-moon"></i>
                    </button>

                    <button class="topbar-icon" title="Notifications">
                        <i class="fa-regular fa-bell"></i>
                        <span class="notification-dot"></span>
                    </button>

                    <div class="admin-profile" onclick="window.showToast('Profile settings coming soon!', 'info')">
                        <img src="https://ui-avatars.com/api/?name=Admin+Root&background=6366f1&color=fff" alt="Admin">
                        <div style="display: flex; flex-direction: column;">
                            <span style="font-weight: 600; font-size: 0.9rem; color: var(--text-primary);">Root
                                Admin</span>
                            <span style="font-size: 0.75rem; color: var(--text-secondary);">Superuser</span>
                        </div>
                        <i class="fa-solid fa-chevron-down"
                            style="color: var(--text-secondary); font-size: 0.8rem; margin-left: 0.5rem;"></i>
                    </div>
                </div>
            </header>

            <!-- Dynamic Screens -->
            <main class="admin-content" id="mainContent">

                <!-- ================= MODULE: DASHBOARD OVERVIEW ================= -->
                <section id="dashboardModule" class="module-section active">
                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 2rem;">
                        <div>
                            <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Dashboard Overview</h1>
                            <p class="text-secondary">Welcome back. Here is what is happening across the college today.
                            </p>
                        </div>
                        <button class="btn btn-outline" style="border-radius: var(--radius-pill);"><i
                                class="fa-solid fa-download"></i> Export Report</button>
                    </div>

                    <!-- Animated Stat Cards -->
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8);"><i
                                    class="fa-solid fa-users"></i></div>
                            <div class="stat-info">
                                <h3>Total Students</h3>
                                <div class="stat-val load-simulate skeleton" style="width:80px; height: 32px;"
                                    data-value="2,450"></div>
                                <div class="stat-growth up"><i class="fa-solid fa-arrow-trend-up"></i> +12% this month
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #8b5cf6, #6d28d9);"><i
                                    class="fa-solid fa-calendar-check"></i></div>
                            <div class="stat-info">
                                <h3>Active Events</h3>
                                <div class="stat-val load-simulate skeleton" style="width:50px; height: 32px;"
                                    data-value="14"></div>
                                <div class="stat-growth up"><i class="fa-solid fa-arrow-trend-up"></i> +3 ongoing</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #10b981, #047857);"><i
                                    class="fa-solid fa-clipboard-check"></i></div>
                            <div class="stat-info">
                                <h3>Registrations</h3>
                                <div class="stat-val load-simulate skeleton" style="width:80px; height: 32px;"
                                    data-value="8,920"></div>
                                <div class="stat-growth up"><i class="fa-solid fa-arrow-trend-up"></i> +450 today</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b, #b45309);"><i
                                    class="fa-solid fa-award"></i></div>
                            <div class="stat-info">
                                <h3>Certs Issued</h3>
                                <div class="stat-val load-simulate skeleton" style="width:80px; height: 32px;"
                                    data-value="6,150"></div>
                                <div class="stat-growth up"><i class="fa-solid fa-arrow-trend-up"></i> +24% automation
                                    rate</div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Grid -->
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                        <div class="chart-card">
                            <h3 style="margin-bottom: 1.5rem; font-size: 1.1rem;">Registration Trends (6 Months)</h3>
                            <div style="height: 300px;"><canvas id="regChart"></canvas></div>
                        </div>
                        <div class="chart-card">
                            <h3 style="margin-bottom: 1.5rem; font-size: 1.1rem;">Global Attendance Rate</h3>
                            <div style="height: 300px;"><canvas id="attendanceChart"></canvas></div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr; gap: 1.5rem;">
                        <div class="chart-card">
                            <h3 style="margin-bottom: 1.5rem; font-size: 1.1rem;">Participation by Department</h3>
                            <div style="height: 300px;"><canvas id="deptChart"></canvas></div>
                        </div>
                    </div>
                </section>

                <!-- ================= MODULE: STUDENTS (ENHANCED DIRECTORATE) ================= -->
                <section id="studentsModule" class="module-section">

                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                        <div>
                            <h1 style="font-size: 2.2rem; margin-bottom: 0.5rem; font-weight: 700;">Student Directorate
                            </h1>
                            <p class="text-secondary" style="font-size: 1.05rem;">Manage profiles, monitor XP progress,
                                and control academic event eligibility.</p>
                        </div>

                        <!-- Export Tools (Top Right) -->
                        <div style="display: flex; gap: 0.8rem;">
                            <button class="btn btn-outline"
                                style="border-radius: var(--radius-pill); background: var(--admin-surface);"><i
                                    class="fa-solid fa-file-csv text-success"></i> CSV</button>
                            <button class="btn btn-outline"
                                style="border-radius: var(--radius-pill); background: var(--admin-surface);"><i
                                    class="fa-solid fa-file-excel text-success"></i> Excel</button>
                            <button class="btn btn-outline"
                                style="border-radius: var(--radius-pill); background: var(--admin-surface);"><i
                                    class="fa-solid fa-print"></i> Print</button>
                            <button class="btn btn-primary" style="border-radius: var(--radius-pill);"><i
                                    class="fa-solid fa-chart-line"></i> Report</button>
                        </div>
                    </div>

                    <!-- Top Analytics Strip (5 Animated Cards) -->
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.2rem; margin-bottom: 2.5rem;">

                        <div class="stat-card" style="padding: 1.2rem; gap: 1rem;">
                            <div class="stat-icon"
                                style="width: 48px; height: 48px; font-size: 1.2rem; background: linear-gradient(135deg, rgba(59,130,246,0.1), rgba(29,78,216,0.2)); color: #3b82f6;">
                                <i class="fa-solid fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3 style="font-size: 0.85rem; text-transform: uppercase;">Total Students</h3>
                                <div class="stat-val load-simulate skeleton"
                                    style="font-size: 1.6rem; width:60px; height: 26px;" data-value="2,450"></div>
                                <div class="stat-growth up" style="font-size: 0.75rem;"><i
                                        class="fa-solid fa-arrow-up"></i> 120 new</div>
                            </div>
                        </div>

                        <div class="stat-card" style="padding: 1.2rem; gap: 1rem;">
                            <div class="stat-icon"
                                style="width: 48px; height: 48px; font-size: 1.2rem; background: linear-gradient(135deg, rgba(16,185,129,0.1), rgba(4,120,87,0.2)); color: #10b981;">
                                <i class="fa-solid fa-user-check"></i>
                            </div>
                            <div class="stat-info">
                                <h3 style="font-size: 0.85rem; text-transform: uppercase;">Active Students</h3>
                                <div class="stat-val load-simulate skeleton"
                                    style="font-size: 1.6rem; width:60px; height: 26px;" data-value="1,842"></div>
                                <div class="stat-growth up" style="font-size: 0.75rem;"><i
                                        class="fa-solid fa-arrow-up"></i> 8% increase</div>
                            </div>
                        </div>

                        <div class="stat-card" style="padding: 1.2rem; gap: 1rem;">
                            <div class="stat-icon"
                                style="width: 48px; height: 48px; font-size: 1.2rem; background: linear-gradient(135deg, rgba(239,68,68,0.1), rgba(185,28,28,0.2)); color: #ef4444;">
                                <i class="fa-solid fa-user-xmark"></i>
                            </div>
                            <div class="stat-info">
                                <h3 style="font-size: 0.85rem; text-transform: uppercase;">Inactive Students</h3>
                                <div class="stat-val load-simulate skeleton"
                                    style="font-size: 1.6rem; width:60px; height: 26px;" data-value="142"></div>
                                <div class="stat-growth down" style="font-size: 0.75rem;"><i
                                        class="fa-solid fa-arrow-down"></i> Needs attention</div>
                            </div>
                        </div>

                        <div class="stat-card" style="padding: 1.2rem; gap: 1rem;">
                            <div class="stat-icon"
                                style="width: 48px; height: 48px; font-size: 1.2rem; background: linear-gradient(135deg, rgba(168,85,247,0.1), rgba(109,40,217,0.2)); color: #a855f7;">
                                <i class="fa-solid fa-bolt"></i>
                            </div>
                            <div class="stat-info">
                                <h3 style="font-size: 0.85rem; text-transform: uppercase;">Avg XP Level</h3>
                                <div class="stat-val load-simulate skeleton"
                                    style="font-size: 1.6rem; width:60px; height: 26px;" data-value="Lvl 4"></div>
                                <div class="stat-growth up" style="font-size: 0.75rem;"><i
                                        class="fa-solid fa-arrow-up"></i> +450 Avg XP</div>
                            </div>
                        </div>

                        <div class="stat-card" style="padding: 1.2rem; gap: 1rem;">
                            <div class="stat-icon"
                                style="width: 48px; height: 48px; font-size: 1.2rem; background: linear-gradient(135deg, rgba(245,158,11,0.1), rgba(180,83,9,0.2)); color: #f59e0b;">
                                <i class="fa-solid fa-file-certificate"></i>
                            </div>
                            <div class="stat-info">
                                <h3 style="font-size: 0.85rem; text-transform: uppercase;">Cert Eligible</h3>
                                <div class="stat-val load-simulate skeleton"
                                    style="font-size: 1.6rem; width:60px; height: 26px;" data-value="850"></div>
                                <div class="stat-growth up" style="font-size: 0.75rem;"><i
                                        class="fa-solid fa-arrow-up"></i> 12 pending</div>
                            </div>
                        </div>

                    </div>

                    <!-- Main Layout Split (Data Grid + Insights Sidebar) -->
                    <div style="display: grid; grid-template-columns: 1fr 300px; gap: 2rem;">

                        <!-- Smart Data Grid Area -->
                        <div style="display: flex; flex-direction: column; gap: 1.5rem;">

                            <!-- Filter Chips & Searchbar -->
                            <div class="grid-toolbar"
                                style="border-radius: var(--radius-lg); padding: 1rem 1.5rem; background: var(--admin-surface);">

                                <div style="position: relative; width: 350px;">
                                    <i class="fa-solid fa-magnifying-glass"
                                        style="position: absolute; left: 1.2rem; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                                    <input type="text" id="studentSearchInput"
                                        placeholder="Search names, reg no, or dept..."
                                        style="width: 100%; padding: 0.7rem 1rem 0.7rem 3rem; border-radius: var(--radius-pill); border: 1px solid var(--card-border); background: var(--bg-color); color: var(--text-primary);">
                                </div>

                                <div class="filter-chips" id="studentFilterChips"
                                    style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                    <button class="chip active">All Students</button>
                                    <button class="chip">Active</button>
                                    <button class="chip">High XP</button>
                                    <button class="chip">CSE Dept</button>
                                    <button class="chip"
                                        style="color: var(--color-danger); background: transparent; border-color: transparent;"><i
                                            class="fa-solid fa-xmark"></i> Clear</button>
                                </div>

                            </div>

                            <!-- Modern Student Table with Integrated Gamification -->
                            <div class="data-grid-wrap shadow-soft"
                                style="border: none; box-shadow: 0 10px 30px -10px rgba(0,0,0,0.05);">

                                <!-- Bulk Actions Bar (Hidden by default, shown when checkboxes clicked) -->
                                <div id="bulkActionsBar"
                                    style="padding: 1rem 1.5rem; background: rgba(99,102,241,0.05); border-bottom: 1px solid var(--card-border); display: flex; justify-content: space-between; align-items: center; display: none;">
                                    <span style="font-weight: 600; color: var(--primary-color);">2 Students
                                        Selected</span>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <button class="btn btn-outline btn-sm"><i class="fa-solid fa-user-check"></i>
                                            Activate</button>
                                        <button class="btn btn-outline btn-sm"><i class="fa-solid fa-user-xmark"></i>
                                            Suspend</button>
                                        <button class="btn btn-primary btn-sm btn-danger"><i
                                                class="fa-solid fa-trash"></i> Delete</button>
                                    </div>
                                </div>

                                <div style="overflow-x: auto;">
                                    <table class="admin-table smart-table">
                                        <thead>
                                            <tr>
                                                <th style="width: 40px; padding-left: 1.5rem;"><input type="checkbox"
                                                        id="selectAllStudents"></th>
                                                <th class="sortable" data-sort="name" style="cursor: pointer;">Student
                                                    Details <i class="fa-solid fa-sort"
                                                        style="color: #cbd5e1; margin-left: 0.5rem;"></i></th>
                                                <th class="sortable" data-sort="xp" style="cursor: pointer;">
                                                    Gamification & XP <i class="fa-solid fa-sort"
                                                        style="color: #cbd5e1; margin-left: 0.5rem;"></i></th>
                                                <th class="sortable" data-sort="status" style="cursor: pointer;">Status
                                                    <i class="fa-solid fa-sort"
                                                        style="color: #cbd5e1; margin-left: 0.5rem;"></i></th>
                                                <th style="text-align: right; padding-right: 1.5rem;">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="studentGridBody">

                                            <!-- Row 1 -->
                                            <tr onclick="window.openStudentProfile('Alex Carter')"
                                                style="cursor: pointer;">
                                                <td onclick="event.stopPropagation()"><input type="checkbox"></td>
                                                <td>
                                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                                        <img src="https://ui-avatars.com/api/?name=Alex+Carter&background=6366f1&color=fff"
                                                            style="width: 40px; height: 40px; border-radius: 50%;">
                                                        <div>
                                                            <div
                                                                style="font-weight: 600; font-size: 1rem; color: var(--text-primary);">
                                                                Alex Carter</div>
                                                            <div
                                                                style="font-size: 0.8rem; color: var(--text-secondary);">
                                                                2026CSE101 • Comp. Science</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div style="width: 180px;">
                                                        <div
                                                            style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.3rem;">
                                                            <span
                                                                style="font-weight: 600; color: var(--primary-color);">Level
                                                                12 <span class="badge badge-tech"
                                                                    style="padding: 0.1rem 0.4rem; font-size: 0.65rem; margin-left: 0.3rem;">Gold</span></span>
                                                            <span style="color: var(--text-secondary);">1,450 XP</span>
                                                        </div>
                                                        <div class="progress-bar-container"
                                                            style="height: 6px; background: rgba(99,102,241,0.1);">
                                                            <div class="progress-bar-fill"
                                                                style="width: 72%; background: var(--primary-color);">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td onclick="event.stopPropagation()">
                                                    <!-- Clickable inline toggle -->
                                                    <div class="status-toggle" onclick="toggleStatus(this)"
                                                        data-status="active">
                                                        <span class="status-badge success"><i
                                                                class="fa-solid fa-circle-dot"
                                                                style="font-size: 0.6rem; margin-right: 0.3rem;"></i>
                                                            Active</span>
                                                    </div>
                                                </td>
                                                <td style="text-align: right; padding-right: 1.5rem;"
                                                    onclick="event.stopPropagation()">
                                                    <button class="action-btn edit" title="Edit Student"><i
                                                            class="fa-solid fa-pen"></i></button>
                                                </td>
                                            </tr>

                                            <!-- Row 2 -->
                                            <tr onclick="window.openStudentProfile('Sarah Jen')"
                                                style="cursor: pointer;">
                                                <td onclick="event.stopPropagation()"><input type="checkbox"></td>
                                                <td>
                                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                                        <img src="https://ui-avatars.com/api/?name=Sarah+Jen&background=ec4899&color=fff"
                                                            style="width: 40px; height: 40px; border-radius: 50%;">
                                                        <div>
                                                            <div
                                                                style="font-weight: 600; font-size: 1rem; color: var(--text-primary);">
                                                                Sarah Jen</div>
                                                            <div
                                                                style="font-size: 0.8rem; color: var(--text-secondary);">
                                                                2026ROB205 • Robotics</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div style="width: 180px;">
                                                        <div
                                                            style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.3rem;">
                                                            <span
                                                                style="font-weight: 600; color: var(--text-primary);">Level
                                                                8 <span class="badge badge-workshop"
                                                                    style="padding: 0.1rem 0.4rem; font-size: 0.65rem; margin-left: 0.3rem;">Silver</span></span>
                                                            <span style="color: var(--text-secondary);">850 XP</span>
                                                        </div>
                                                        <div class="progress-bar-container" style="height: 6px;">
                                                            <div class="progress-bar-fill"
                                                                style="width: 45%; background: var(--text-primary);">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td onclick="event.stopPropagation()">
                                                    <div class="status-toggle" onclick="toggleStatus(this)"
                                                        data-status="active">
                                                        <span class="status-badge success"><i
                                                                class="fa-solid fa-circle-dot"
                                                                style="font-size: 0.6rem; margin-right: 0.3rem;"></i>
                                                            Active</span>
                                                    </div>
                                                </td>
                                                <td style="text-align: right; padding-right: 1.5rem;"
                                                    onclick="event.stopPropagation()">
                                                    <button class="action-btn edit" title="Edit Student"><i
                                                            class="fa-solid fa-pen"></i></button>
                                                </td>
                                            </tr>

                                            <!-- Row 3 -->
                                            <tr onclick="window.openStudentProfile('Rahul Kumar')"
                                                style="cursor: pointer;">
                                                <td onclick="event.stopPropagation()"><input type="checkbox"></td>
                                                <td>
                                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                                        <img src="https://ui-avatars.com/api/?name=Rahul+Kumar&background=475569&color=fff"
                                                            style="width: 40px; height: 40px; border-radius: 50%;">
                                                        <div>
                                                            <div
                                                                style="font-weight: 600; font-size: 1rem; color: var(--text-primary);">
                                                                Rahul Kumar</div>
                                                            <div
                                                                style="font-size: 0.8rem; color: var(--text-secondary);">
                                                                2026MEC042 • Mechanical</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div style="width: 180px; opacity: 0.5;">
                                                        <div
                                                            style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.3rem;">
                                                            <span
                                                                style="font-weight: 600; color: var(--text-secondary);">Level
                                                                1 <span class="badge"
                                                                    style="background: rgba(0,0,0,0.05); padding: 0.1rem 0.4rem; font-size: 0.65rem; margin-left: 0.3rem;">Bronze</span></span>
                                                            <span style="color: var(--text-secondary);">10 XP</span>
                                                        </div>
                                                        <div class="progress-bar-container"
                                                            style="height: 6px; background: rgba(0,0,0,0.05);">
                                                            <div class="progress-bar-fill"
                                                                style="width: 5%; background: var(--text-secondary);">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td onclick="event.stopPropagation()">
                                                    <div class="status-toggle" onclick="toggleStatus(this)"
                                                        data-status="inactive">
                                                        <span class="status-badge warning"><i
                                                                class="fa-solid fa-circle-pause"
                                                                style="font-size: 0.6rem; margin-right: 0.3rem;"></i>
                                                            Inactive</span>
                                                    </div>
                                                </td>
                                                <td style="text-align: right; padding-right: 1.5rem;"
                                                    onclick="event.stopPropagation()">
                                                    <button class="action-btn edit" title="Edit Student"><i
                                                            class="fa-solid fa-pen"></i></button>
                                                </td>
                                            </tr>

                                        </tbody>
                                    </table>
                                </div>

                                <div
                                    style="padding: 1rem 1.5rem; background: rgba(0,0,0,0.01); display: flex; justify-content: space-between; align-items: center; color: var(--text-secondary); font-size: 0.9rem; border-top: 1px solid var(--card-border);">
                                    <span id="studentPagInfo">Showing 1 to 3 of 3 entries</span>
                                    <div style="display: flex; gap: 0.5rem;" id="studentPagination">
                                        <!-- Pagination dynamically injected -->
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Smart Insights Panel Sidebar -->
                        <div class="insights-panel" style="position: sticky; top: 0;">

                            <div class="glass"
                                style="border-radius: var(--radius-lg); padding: 1.5rem; border: 1px solid rgba(168,85,247,0.3); background: linear-gradient(180deg, rgba(168,85,247,0.05) 0%, var(--admin-surface) 100%);">

                                <h3
                                    style="font-size: 1.2rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem; color: var(--text-primary);">
                                    <i class="fa-solid fa-wand-magic-sparkles text-gradient"></i> System Insights
                                </h3>

                                <div style="display: flex; flex-direction: column; gap: 1rem;">

                                    <div
                                        style="padding: 1rem; border-radius: var(--radius-md); background: var(--color-success-light); border-left: 3px solid var(--color-success);">
                                        <div
                                            style="font-weight: 600; font-size: 0.9rem; color: var(--color-success); margin-bottom: 0.2rem;">
                                            Milestone Reached <i class="fa-solid fa-party-horn"></i></div>
                                        <p style="font-size: 0.85rem; color: var(--text-primary); margin: 0;">12
                                            students just became eligible for the <strong>Master Attendant
                                                Certificate</strong>.</p>
                                    </div>

                                    <div
                                        style="padding: 1rem; border-radius: var(--radius-md); background: rgba(0,0,0,0.02); border: 1px solid var(--card-border);">
                                        <div
                                            style="font-weight: 600; font-size: 0.9rem; color: var(--text-primary); margin-bottom: 0.2rem;">
                                            <i class="fa-solid fa-chart-simple text-primary"></i> Participation Drop
                                        </div>
                                        <p style="font-size: 0.85rem; color: var(--text-secondary); margin: 0;">Robotics
                                            Department has a 15% decrease in attendance this month.</p>
                                    </div>

                                    <div
                                        style="padding: 1rem; border-radius: var(--radius-md); background: var(--color-warning-light); border-left: 3px solid var(--color-warning);">
                                        <div
                                            style="font-weight: 600; font-size: 0.9rem; color: var(--color-warning); margin-bottom: 0.2rem;">
                                            <i class="fa-solid fa-clock"></i> Inactivity Alert
                                        </div>
                                        <p style="font-size: 0.85rem; color: var(--text-primary); margin: 0;">3 students
                                            have been marked inactive for over 30 days. Action recommended.</p>
                                    </div>

                                </div>

                                <div
                                    style="margin-top: 1.5rem; text-align: center; border-top: 1px solid var(--card-border); padding-top: 1rem;">
                                    <button class="btn btn-outline"
                                        style="width: 100%; border-radius: var(--radius-pill); font-size: 0.85rem;"><i
                                            class="fa-solid fa-arrows-rotate"></i> Refresh AI Insights</button>
                                </div>
                            </div>

                        </div>
                    </div>
                </section>

                <!-- ================= MODULE: REGISTRATIONS & ATTENDANCE ================= -->
                <section id="registrationsModule" class="module-section">
                    <div style="margin-bottom: 2rem;">
                        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Event Attendance Terminal</h1>
                        <p class="text-secondary">Mark attendance instantly to auto-issue certificates.</p>
                    </div>

                    <div class="data-grid-wrap">
                        <div class="grid-toolbar">
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <span style="font-weight: 600;">Active Event:</span>
                                <select
                                    style="padding: 0.6rem 1rem; border-radius: var(--radius-pill); border: 1px solid var(--card-border); background: var(--bg-color); color: var(--primary-color); font-weight: 600; outline: none;">
                                    <option>National Tech Symposium 2026</option>
                                    <option>AI & ML Deep Dive</option>
                                </select>
                            </div>
                            <button class="btn btn-primary"
                                onclick="window.showToast('300 Certificates Auto-Issued based on Attendance.', 'success')">
                                <i class="fa-solid fa-wand-magic-sparkles"></i> Auto-Issue Certs to Presentees
                            </button>
                        </div>

                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Student Name</th>
                                    <th>Reg No.</th>
                                    <th>Registration Date</th>
                                    <th>Attendance Status</th>
                                    <th style="text-align: right;">Toggle Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Alex Carter</td>
                                    <td>2026CSE101</td>
                                    <td>Oct 10, 2026</td>
                                    <td><span class="status-badge warning" id="attGrp1">Registered</span></td>
                                    <td style="text-align: right;">
                                        <button class="btn btn-outline"
                                            style="padding: 0.4rem 1rem; border-color: var(--color-success); color: var(--color-success);"
                                            onclick="document.getElementById('attGrp1').className='status-badge success'; document.getElementById('attGrp1').innerText='Present'; window.showToast('Marked Present')">Mark
                                            Present</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Sarah Jen</td>
                                    <td>2026ROB205</td>
                                    <td>Oct 11, 2026</td>
                                    <td><span class="status-badge success">Present</span></td>
                                    <td style="text-align: right;">
                                        <button class="btn btn-outline" style="padding: 0.4rem 1rem;"
                                            disabled>Logged</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Rahul Kumar</td>
                                    <td>2026MEC042</td>
                                    <td>Oct 11, 2026</td>
                                    <td><span class="status-badge danger">Absent</span></td>
                                    <td style="text-align: right;">
                                        <button class="btn btn-outline" style="padding: 0.4rem 1rem;"
                                            disabled>Logged</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- ================= MODULE: ACTIVITY LOGS ================= -->
                <section id="logsModule" class="module-section">
                    <div style="margin-bottom: 2rem;">
                        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">System Activity Timeline</h1>
                        <p class="text-secondary">Immutable transparent records of recent operations.</p>
                    </div>

                    <div class="glass" style="padding: 2.5rem; border-radius: var(--radius-lg);">
                        <div class="timeline">

                            <div class="timeline-item">
                                <div class="timeline-icon"><i class="fa-solid fa-file-certificate"></i></div>
                                <div class="timeline-content">
                                    <p style="margin: 0;"><strong>System</strong> auto-issued 15 certificates for <em>AI
                                            & ML Deep Dive</em>.</p>
                                    <span class="timeline-time">Just now</span>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-icon"
                                    style="color: var(--color-success); border-color: var(--color-success);"><i
                                        class="fa-solid fa-user-check"></i></div>
                                <div class="timeline-content">
                                    <p style="margin: 0;"><strong>Prof. Smith</strong> marked attendance for 145
                                        students in <em>National Tech Symposium</em>.</p>
                                    <span class="timeline-time">2 hours ago</span>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <div class="timeline-icon"
                                    style="color: var(--color-danger); border-color: var(--color-danger);"><i
                                        class="fa-solid fa-trash-can"></i></div>
                                <div class="timeline-content">
                                    <p style="margin: 0;"><strong>Root Admin</strong> revoked a certificate for invalid
                                        ID (2026CIV099).</p>
                                    <span class="timeline-time">Yesterday, 14:30 PM</span>
                                </div>
                            </div>

                        </div>
                    </div>
                </section>

                <!-- ================= MODULE: EVENTS ================= -->
                <section id="eventsModule" class="module-section">
                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 2rem;">
                        <div>
                            <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Event Logistics Hub</h1>
                            <p class="text-secondary">Track ongoing events, manage seating, and upload banners.</p>
                        </div>
                    </div>
                    <div class="grid-cards" style="grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));">

                        <div class="interactive-card glass">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                <span class="status-badge success">Ongoing</span>
                                <div style="display: flex; gap: 0.5rem;">
                                    <button class="action-btn edit"
                                        onclick="window.openDrawer('Edit Event: Tech Symposium')"><i
                                            class="fa-solid fa-pen"></i></button>
                                    <button class="action-btn"><i class="fa-solid fa-copy"></i></button>
                                </div>
                            </div>
                            <h3 style="font-size: 1.4rem; margin-bottom: 0.5rem;">National Tech Symposium</h3>
                            <p class="text-secondary" style="font-size: 0.9rem; margin-bottom: 1rem;"><i
                                    class="fa-regular fa-calendar"></i> Oct 15, 2026</p>

                            <div style="margin-bottom: 1rem;">
                                <div
                                    style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 0.3rem; font-weight: 600;">
                                    <span>Seats Filled</span>
                                    <span style="color: var(--primary-color);">420 / 500</span>
                                </div>
                                <div class="progress-bar-container">
                                    <div class="progress-bar-fill"
                                        style="width: 84%; background: var(--primary-color);"></div>
                                </div>
                            </div>
                            <button class="btn btn-outline" style="width: 100%; border-radius: var(--radius-pill);"><i
                                    class="fa-solid fa-eye"></i> View Registrations</button>
                        </div>

                        <div class="interactive-card glass">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                                <span class="status-badge info">Upcoming</span>
                                <div style="display: flex; gap: 0.5rem;">
                                    <button class="action-btn edit"
                                        onclick="window.openDrawer('Edit Event: AI & ML')"><i
                                            class="fa-solid fa-pen"></i></button>
                                    <button class="action-btn"><i class="fa-solid fa-copy"></i></button>
                                </div>
                            </div>
                            <h3 style="font-size: 1.4rem; margin-bottom: 0.5rem;">AI & ML Deep Dive</h3>
                            <p class="text-secondary" style="font-size: 0.9rem; margin-bottom: 1rem;"><i
                                    class="fa-regular fa-calendar"></i> Oct 20, 2026</p>

                            <div style="margin-bottom: 1rem;">
                                <div
                                    style="display: flex; justify-content: space-between; font-size: 0.85rem; margin-bottom: 0.3rem; font-weight: 600;">
                                    <span>Seats Filled</span>
                                    <span style="color: var(--color-warning);">145 / 150</span>
                                </div>
                                <div class="progress-bar-container">
                                    <div class="progress-bar-fill"
                                        style="width: 96%; background: var(--color-warning);"></div>
                                </div>
                            </div>
                            <button class="btn btn-outline" style="width: 100%; border-radius: var(--radius-pill);"><i
                                    class="fa-solid fa-eye"></i> View Registrations</button>
                        </div>

                    </div>
                </section>

                <!-- ================= MODULE: CERTIFICATES ================= -->
                <section id="certificatesModule" class="module-section">
                    <div style="margin-bottom: 2rem;">
                        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Certificate Issuance System</h1>
                        <p class="text-secondary">Preview, generate, and revoke digital credentials securely.</p>
                    </div>
                    <div class="data-grid-wrap">
                        <div class="grid-toolbar">
                            <div class="topbar-search"><i class="fa-solid fa-magnifying-glass"></i><input type="text"
                                    placeholder="Search ID or Name..."></div>
                        </div>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Cert ID</th>
                                    <th>Student Name</th>
                                    <th>Event</th>
                                    <th>Status</th>
                                    <th style="text-align: right;">Operations</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="font-family: monospace; color: var(--text-secondary);">CERT-904A-X</td>
                                    <td>Alex Carter</td>
                                    <td>Tech Symposium</td>
                                    <td><span class="status-badge success">Issued</span></td>
                                    <td style="text-align: right;">
                                        <a href="certificate.html" target="_blank" class="action-btn edit"
                                            title="Preview"><i class="fa-solid fa-eye"></i></a>
                                        <button class="action-btn" style="color: var(--color-info);" title="Email"><i
                                                class="fa-solid fa-envelope"></i></button>
                                        <button class="action-btn delete" title="Revoke"
                                            onclick="window.showToast('Certificate Revoked.', 'error')"><i
                                                class="fa-solid fa-ban"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- ================= MODULE: ROLES ================= -->
                <section id="rolesModule" class="module-section">
                    <div style="margin-bottom: 2rem;">
                        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">Access Control Matrix</h1>
                        <p class="text-secondary">Define permissions for faculty and staff.</p>
                    </div>
                    <div
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                        <div class="glass"
                            style="padding: 1.5rem; border-radius: var(--radius-lg); border-top: 4px solid var(--primary-color);">
                            <h3 style="margin-bottom: 0.5rem;">Super Admin</h3>
                            <p class="text-secondary" style="font-size: 0.9rem; margin-bottom: 1rem;">Full system access
                                including destructive operations.</p>
                            <ul
                                style="list-style: none; display: flex; flex-direction: column; gap: 0.5rem; font-size: 0.9rem; margin-bottom: 1.5rem;">
                                <li><i class="fa-solid fa-check text-primary"></i> Manage Admins</li>
                                <li><i class="fa-solid fa-check text-primary"></i> Revoke Certificates</li>
                                <li><i class="fa-solid fa-check text-primary"></i> View Global Analytics</li>
                            </ul>
                            <button class="btn btn-outline" style="width: 100%;">Edit Role</button>
                        </div>
                        <div class="glass"
                            style="padding: 1.5rem; border-radius: var(--radius-lg); border-top: 4px solid var(--color-success);">
                            <h3 style="margin-bottom: 0.5rem;">Event Coordinator</h3>
                            <p class="text-secondary" style="font-size: 0.9rem; margin-bottom: 1rem;">Can edit events
                                and trigger auto-issuance.</p>
                            <ul
                                style="list-style: none; display: flex; flex-direction: column; gap: 0.5rem; font-size: 0.9rem; margin-bottom: 1.5rem;">
                                <li><i class="fa-solid fa-check text-primary"></i> Create/Edit Events</li>
                                <li><i class="fa-solid fa-check text-primary"></i> Mark Attendance</li>
                                <li><i class="fa-solid fa-xmark text-secondary"></i> Revoke Certificates</li>
                            </ul>
                            <button class="btn btn-outline" style="width: 100%;">Edit Role</button>
                        </div>
                    </div>
                </section>

            </main>
        </div>
    </div>

    <!-- Slide-in Drawer Component structure -->
    <div class="slide-drawer-overlay" id="drawerOverlay" onclick="window.closeDrawer()"></div>
    <div class="slide-drawer" id="slideDrawer">
        <div class="drawer-header">
            <h2 style="font-size: 1.25rem; font-weight: 600;" id="drawerTitle">Drawer Title</h2>
            <button class="action-btn" onclick="window.closeDrawer()"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div class="drawer-body">
            <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" class="form-control" value="Alex Carter"
                    style="background: var(--bg-color); color: var(--text-primary); border-color: var(--card-border);">
            </div>
            <div class="form-group">
                <label class="form-label">Account Status</label>
                <select class="form-control"
                    style="background: var(--bg-color); color: var(--text-primary); border-color: var(--card-border);">
                    <option>Active</option>
                    <option>Suspended</option>
                </select>
            </div>
            <div
                style="background: rgba(245, 158, 11, 0.1); border-left: 4px solid var(--color-warning); padding: 1rem; border-radius: var(--radius-sm); margin-top: 2rem;">
                <p style="margin:0; font-size: 0.9rem; color: var(--color-warning);"><i
                        class="fa-solid fa-triangle-exclamation"></i> Editing core attributes may reset gamification XP.
                </p>
            </div>
        </div>
        <div class="drawer-footer">
            <button class="btn btn-outline" onclick="window.closeDrawer()">Cancel</button>
            <button class="btn btn-primary"
                onclick="window.closeDrawer(); window.showToast('Updates saved successfully.')">Save Changes</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="admin.js"></script>
</body>

</html>